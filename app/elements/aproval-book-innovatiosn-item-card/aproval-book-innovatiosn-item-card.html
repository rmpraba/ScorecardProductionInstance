
<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="aproval-book-innovatiosn-item-card">
  <template>
    <style>
      :host {   
        display: block;
      }
      .bintable
      {   
          table-layout: fixed;
          width: 1900px;
          border-collapse: collapse;
        
          margin-left: -1%;
          margin-top: -1%;
     }
     th,td{
    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    border-top: 1px solid #ddd;

     }
    
     .homeaide{
     
        overflow-x: visible;
        overflow-y: hidden;   
        height: 90px;
        width: 80%;
        margin-top: 14%;
        margin-left: 5%;
      }

        .remarka
     
      {
        overflow-x: visible;
        overflow-y: hidden;   
        height: 90px;
        width: 80%;
        margin-top: 14%;
        margin-left: 5%;
      }

      #teachingtextttt
      {
        overflow-x: visible;
        overflow-y: hidden;
        height: 90px;
        width: 45%;
        margin-top: 14%;
      }
     
     .invo{
      overflow-x: visible;
        overflow-y: hidden;
        height: 90px;
        width: 80%;
        margin-top: 14%;
        margin-left: 5%;
     }
      #fngetdialogid
      {
          border-radius: 10px;
          width: 700px;
          height: 370px;
          margin-left: -5%;
      }
    
      #dzfsd1xsasa
      {
          border-radius: 10px;
          height: 320px;
          width: 700px;
           margin-left: -5%;
      }
      #skilldialog
      {
          border-radius: 10px;
          width: 350px;
          height: 270px;
       
      }
      #valuedialog
      {
          border-radius: 10px;
          width: 380px;
          height: 270px;
      }
      #innovationdialog
      {
          border-radius: 10px;
          width: 380px;
          height: 270px;
      }
      #remarkdialog
      {
          border-radius: 10px; 
          width: 380px;
          height: 270px;
      }

      #fnhomeaidsdialog
      {
          border-radius: 10px;
          width: 380px;
          height: 270px;
      }
      #lrrecitificationdialog
      {
          border-radius: 10px;
          width: 380px;
          height: 270px;
      }
      #lsstatusdialog
      {
        border-radius: 10px;
          width: 380px;
          height: 270px;
      }
      #fngetskilldialogid
      {
        border-radius: 10px;
        width: 650px;
        height: 300px;
        margin-left: -6%;
      }
      .horizontalframes1
      {
         @apply(--layout-horizontal);
        width: 90%;
      }
    
      .subconceptcard
      {
        width: 93%;
        height: 55%;
        overflow-x: hidden;
        overflow-y: scroll;
      }
      .skillcardd
      {
         width: 92%;
        height: 50%;
        overflow-x: hidden;
        overflow-y: scroll;
      }
      .home
      {
    height: 50%;
    overflow: auto;
    width: 113.7%;
    overflow-x: hidden;
    margin-top: 24.4%;
    margin-left: -21%;
      }
      .bldcard
      {
        width: 92%;
        height: 50%;
        overflow-x: hidden;
        overflow-y: scroll;
      }
      .valuecard
      {
        width: 92%;
        height: 50%;
        overflow-x: hidden;
        overflow-y: scroll;
      }

  .teachingopendialog1
      {
   border-radius: 10px;
    width: 729px;
    height: 502px;
      }

    
 .homeworkdialog1
      {
    border-radius: 10px;
    width: 729px;
    height: 502px;
      }
   .remarka1
      {
        overflow-x: hidden;
        overflow-y: hidden;   
        height: 90px;
        width: 400px;
       
      }
      #savedialog
        {
          border-radius: 10px;
          width: 354px;
          height: 170px;
        }
    #conceptcheckid
        {
          border-radius: 10px;
          width: 450px;
          height: 200px;
        }
        #failuredialog
        {
          border-radius: 10px;
          width: 354px;
          height: 170px;
        }
h4{
  text-transform: lowercase;
}

.inputstyle{
  font-size: 11pt;
    color: white;
    background-color: #030113;
    border: 5px solid #0e0e0e;
    padding: 4px;
    border-radius: 11px;
}
    </style>
    <div >
          
       <div hidden>{{rowid}}{{conceptid}}{{capterid}}{{subconceptid}}{{rowidz}}</div>
        <table class="bintable">
           <tr>
            <td  hidden>{{sno}}</td>
             
              <td width="12.56%">
           
              <div style="height: 50px; overflow:hidden;">  
                <paper-icon-button hidden$="{{hidecheck1}}" icon="add" on-click="fngetsubconcept" style="color:#6699ff;float: right;"></paper-icon-button>
                  <template is="dom-repeat" items="{{subconceptarr1}}" as="rse">
                    <h4 >{{rse.subconceptname}}</h4>
                  </template>
                  <h4 hidden$="{{hidedbconcept}}">{{subconceptname}}</h4>
             </div>
               
           </td>
            <td style="width: 4.45%;text-align:left;">
                <paper-input style="width: 80%;" value="{{period}}" allowed-pattern="[0-9]"></paper-input>
            </td>
             <td style="width: 8.1%;text-align:left;">
                 <p  hidden$="{{hidecheck}}">{{planneddate}}</p>
                <div class="card"  hidden$="{{hidecheck1}}">
                   {{showdate}}<iron-icon icon="icons:date-range"  style="color:#20BFEE;" on-click="FnShowDialog" ></iron-icon>

                    <paper-dialog id="dialog" class="paper-date-picker-dialog"    on-iron-overlay-closed="FnDismissDialog" modal>
                <paper-date-picker id="picker" date="{{date}}"></paper-date-picker>
                        <div class="buttons">
                         <paper-button dialog-dismiss>Cancel
                         </paper-button>
                        <paper-button dialog-confirm>OK</paper-button>
                        </div>
                    </paper-dialog>
                </div>
                  <dialog-page id="ID_Show_Dialog"></dialog-page>
              </td>
              <td style="width: 8.1%;text-align:left;">
              <p hidden$="{{hidecheck}}" >{{plannedtoate}}</p>
          <from-book-date-picker hidden$="{{hidecheck1}}"
        plannedtoate="{{plannedtoate}}"></from-book-date-picker>
             </td>
            <td style="width: 8.1%;text-align:left;">
            <p hidden$="{{hidecheck}}" >{{assesmentdate}}</p>
             <assesment-date-picker hidden$="{{hidecheck1}}" assesmentdate="{{assesmentdate}}"></assesment-date-picker>
            </td>
          
       <td style="width: 8.01%;text-align:left;" >
        <div style="height: 50px; overflow:hidden;">
           <paper-icon-button on-click="Fnhomeworks" icon="add" hidden$="{{hidecheck1}}" style="color:#6699ff;float: right;"></paper-icon-button>
             <template is="dom-repeat" items="{{hometemparr}}" as="rse">
                  <div hidden$="{{rse.hidehomecont}}">
                   <h4>{{rse.content}}</h4>-
                 </div>
                 <div hidden$="{{rse.hidehomeurl}}">
                    <a href="{{rse.content}}" target="_blank" >{{rse.content}}</a>
                </div>
             </template>
       
           <paper-input id="homefomeid{{rowid}}"  readonly value="{{homework}}"></paper-input>
           <h4 hidden$="{{hidedbhomewok}}">{{homework}}</h4>
        </div>
       </td>


        <td style="width: 8.1%;text-align:left;">
          <div style="height: 50px; overflow:hidden;">
              <paper-icon-button   hidden$="{{hidecheck1}}" icon="add" on-click="fngetskill" style="color:#6699ff;float: right;"></paper-icon-button>
              <template is="dom-repeat" items="{{skillarrzx}}" as="r">
               <h4 >{{r.skillname}}</h4>
             </template>
              <h4 hidden$="{{hidedbskill}}">{{skill}}</h4>
          </div>   
        </td>
         <td style="width: 8.01%;" hidden>
               <div style="height: 50px; overflow:hidden;">
              <paper-button on-click="fnhomeaids">
                <h4 style="width: 10em;" hidden>{{homeaids}}</h4>
              </paper-button>  
            </td>

 

 
 <td style="width: 8.01%;text-align:left;">
      <div style="height: 50px; overflow:hidden;">        
        <paper-icon-button  hidden$="{{hidecheck1}}"  icon="add" on-click="fngetconceptz1" style="color:#6699ff;float: right;"></paper-icon-button>
        <template is="dom-repeat" items="{{mainarr}}" as="ry">
           <h4 style="margin-left: 4%;"> {{ry.valuename}}</h4>
        </template>
       <h4 hidden$="{{hidedbvalue}}">{{values}}</h4>
    </div>
  </td>
            <td style="width: 8.01%;text-align:left;">
              <div style="height: 50px; overflow:hidden;">
                <paper-icon-button on-click="fnteachingaid" icon="add" hidden$="{{hidecheck1}}" style="color:#6699ff;float: right;"></paper-icon-button>
               <!--  <a href="{{currurl}}" target="_blank">{{currurl}}</a>
  -->
  <template is="dom-repeat" items="{{teachtemparr}}" as="rse">
                  <div hidden$="{{rse.hideteachcont}}">
                   <h4>{{rse.content}}</h4>-
                 </div>
                 <div hidden$="{{rse.hideteachurl}}">
                    <a href="{{rse.content}}" target="_blank" >{{rse.content}}</a>
                </div>
             </template>

                
                 <paper-input id="fomeid{{rowid}}"  readonly value="{{teachingaid}}"></paper-input>
               <h4>{{teachingaid}}</h4>
             </div>
           </td>

           <td style="width: 8.01%;text-align:left;">
             <div style="height: 50px; overflow:hidden;">
              <paper-button on-click="lsninnovation">
                <h4 >{{innovation}}</h4>
              </paper-button>
              </div>
            </td>
            
            <td style="width: 8.01%;text-align:left;">
               <div style="height: 50px; overflow:hidden;">
              <paper-button on-click="lsnremark">
                <h4 >{{remark}}</h4>
              </paper-button>  
            </td>

            
            <td style="width: 3.4%;">
                <paper-icon-button id="saveidd"  hidden$="{{hidecheck1}}"  icon="save" on-click="fnsavebook"></paper-icon-button>
                <paper-tooltip for="saveidd">Save</paper-tooltip>
                <paper-icon-button id="editidd" hidden$="{{hidecheck}}"  icon="create" on-click="fneditbook"></paper-icon-button> 
                <paper-tooltip for="editidd">Edit</paper-tooltip>
            </td>
             
           </tr>
       </table>
     </div>

    

     <paper-dialog id="dzfsd1xsasa"  modal>
       <h3>Value Name</h3>
        <div class="valuecard">
          <template is="dom-repeat" items="{{valuearrz}}" as="ss">
            <aproval-book valueid="{{ss.value_id}}" id="VVYJ{{rowid}}{{iddate}}{{ss.value_id}}" valuename="{{ss.value_name}}" check="{{ss.check}}" rowid="{{rowid}}"></aproval-book>
          </template>  
        </div>  
      <center style="margin-top: 5%;">
          <paper-button on-click="fnsubmit1"  style="background-color:black;color:white">Submit</paper-button>
         <paper-button on-click="fnclose1" style="background-color:black;color:white">Close</paper-button>
      </center>
    </paper-dialog>

     <paper-dialog id="fngetdialogid" modal >
          <h3>Subconcept Name</h3>
      <div class="subconceptcard">
        <template is="dom-repeat" items="{{subconceptarr}}" as="su">
         <subconcept-dialog-card subconceptid="{{su.sub_concept_id}}" id="VVYJ{{rowid}}{{iddate}}{{su.sub_concept_id}}" subconceptname="{{su.sub_concept_name}}" conceptid="{{su.concept_id}}" concept="{{su.concept}}" rowid="{{rowid}}" check="{{su.check}}"></subconcept-dialog-card>  
        </template>     
      </div>  
      <center style="margin-top: 5%;">
          <paper-button on-click="subconcept"  style="background-color:black;color:white">Submit</paper-button>
         <paper-button on-click="subconceptclose" style="background-color:black;color:white">Close</paper-button>
      </center>
      </paper-dialog>

       
       <paper-dialog id="fngetskilldialogid" modal >
        <h3>Skill Name</h3>
          <div class="skillcardd">
            <template is="dom-repeat" items="{{skillarrz}}" as="sa">
              <skill-dialog-card skillid="{{sa.skill_id}}" id="VVYJ{{rowid}}{{iddate}}{{sa.skill_id}}" skillname="{{sa.skill_name}}" check="{{sa.check}}" rowid="{{rowid}}"></skill-dialog-card>
            </template>  
          </div>  
              
          <center style="margin-top: 5%;">
              <paper-button on-click="skillsave"  style="background-color:black;color:white">Submit</paper-button>
              <paper-button on-click="skillclose" style="background-color:black;color:white">Close</paper-button>
          </center>
      </paper-dialog>


      <paper-dialog id="innovationdialog"  modal>
          <iron-autogrow-textarea id="innovatetextsssss{{rowid}}" placeholder="Your innovation goes here..." class="invo"  value="{{value}}"></iron-autogrow-textarea>
          <center style="margin-top: 10%;">
            <paper-button  on-click="innovatsave" style="color:white;background-color:black">Save</paper-button>
            <paper-button id="innvtt" style="color:white;background-color:black" on-click="innovatclose" >Close</paper-button>

            
          </center>
      </paper-dialog>

       <paper-dialog id="remarkdialog" modal>
          <iron-autogrow-textarea label="Remarks" placeholder="Your remarks goes here..." value="{{value}}" id="remarkareaaaaa11{{rowid}}" class="remarka" ></iron-autogrow-textarea>
          <center style="margin-top: 10%;">
            <paper-button  on-click="remarksave" style="color:white;background-color:black">Save</paper-button>
            <paper-button id="rmcls1" style="color:white;background-color:black" on-click="remarkclose" >Close</paper-button></center>
      </paper-dialog>

      <paper-dialog id="fnhomeaidsdialog" modal>
          <iron-autogrow-textarea id="homeaidsinfoid{{rowid}}"  class="homeaide" label="Home Aids" placeholder="Your Home goes here..."  value="{{value}}"></iron-autogrow-textarea>
          <center style="margin-top: 10%;">
            <paper-button  on-click="homeaidssave" style="color:white;background-color:black">Save</paper-button>
            <paper-button id="rmcls1" style="color:white;background-color:black" on-click="homeclose" >Close</paper-button>

         
          </center>
      </paper-dialog>


<paper-dialog id="homeworkdialog{{rowid}}"  class="homeworkdialog1" modal>
    <center><h2>Home Work</h2> </center> 
        
          
      <table style="width: 20%;border-collapse: collapse;margin-left: 1.3%;">
       <tr>
          <th>Upload Your file here</th>
          <th>Enter Url/Content</th>
          <th>Save</th>
       </tr>
         <tr>
          <td></td>
        <td>
          <center>
              <paper-checkbox id=homeurl{{id}} on-change="Fnhomeurl">Url</paper-checkbox>
              <paper-checkbox id=homecontent{{id}} on-change="Fnhomecontent">Content</paper-checkbox>
          </center>
        </td>
         <td></td>
      </tr>
    <tr>
      <td>
        <body onload="myFunction()">  
          <form id="lphomeworkdialog" method="post" enctype="multipart/form-data" action="/home" target="_blank">
          <p>
           <input type="file" name="upl1" id="homefile{{rowid}}" onchange="fnhomeuplode()"/>
          </p>
           <p  >
            <input type="submit"  class="inputstyle" value="Submit"  onclick="fnhomes()"/>
          </p>
          </form>  
        </body>
      </td>
      <td>
         <iron-autogrow-textarea id="homeworkvalu{{rowid}}" placeholder="Enter your homeurl here..." value="{{value}}"   class="remarka1"></iron-autogrow-textarea>
      </td>
      <td>
         <paper-icon-button on-click="homesave" icon='save'></paper-icon-button>
      </td>
        </tr>
   </table>
  
   <div style="margin-top: -30%;margin-left: 92%;color: #a99f9f;" >
        <paper-icon-button id="taid1" icon='close'  on-click="closehomeid" ></paper-icon-button>
    </div>

  <div class="home">
   <table style="border-collapse:collapse;">
       <tr>
          <template is="dom-repeat" items="{{currenthometemp}}" as="nt">
             <aproval-book-homework-card homefilename="{{nt.homeglfilename}}"  homecurrurl="{{nt.homecurrurl}}" homeflag="{{nt.homeflag}}" currenthomeurl="{{nt.currenthomeurl}}" fonts="{{nt.fonts}}" hideopenplan="{{nt.hideopenplan}}"  hidecloseplan="{{nt.hidecloseplan}}"  hidcontent="{{nt.hidcontent}}" hidurl="{{nt.hidurl}}" rowid={{rowid}}  ></aproval-book-homework-card>
          </template> 
       </tr>
   </table>
   </div>
   </paper-dialog>
   
  <paper-dialog id="teachingopendialog{{rowid}}"  class="teachingopendialog1" modal >
   <center><h3>Teaching Aids</h3></center>
    <table style="width: 20%;border-collapse: collapse;margin-left: 1.3%;">
      <tr>
         <th>Upload your file here</th>
         <th> Enter Url/Content</th>
         <th> Save</th>
          
      </tr>
      <tr>
        <td></td>
        <td>
          <center>
              <paper-checkbox id=url{{id}} on-change="Fnurl">Url</paper-checkbox>
              <paper-checkbox id=content{{id}} on-change="Fncontent">Content</paper-checkbox>
          </center>
        </td>
         <td></td>
      </tr>
      <tr>
       <td>
        <body onload="myFunction()">  
         <form id="lpteachingaidupload" method="post" enctype="multipart/form-data" action="/upload" target="_blank">
         <p>
         <input type="file" name="upl" id="myFile{{rowid}}" onchange="eatFood()"/>
        </p>
        <p >
          <input class="inputstyle" type="submit"  value="Submit"  onclick="fnfood1()" / >
        </p>
       </form>  
       </body>
       </td>
     <td>
        <iron-autogrow-textarea id="curriculam{{rowid}}" placeholder=" Enter your url here..." value="{{value}}" class="remarka1"></iron-autogrow-textarea>
    </td>
     <td>
         <paper-icon-button   icon='save' on-click="Teachsave"></paper-icon-button>
        
    </td>
       </tr>
   </table>  
 
   <div style="margin-top: -30%;margin-left: 92%;color: #a99f9f;">
       <paper-icon-button  pid="taid1" on-click="closeteachingaaid" icon='close'></paper-icon-button>
   </div>


<div class="home">
   <table style="border-collapse:collapse;">
       <tr>
          <template is="dom-repeat" items="{{currenttechtemp}}" as="nt">
              <aproval-book-teaching-card glfilename="{{nt.glfilename}}"  currentteachurl="{{nt.currentteachurl}}" techflag="{{nt.techflag}}" currurl="{{nt.currurl}}" fonts="{{nt.fonts}}" hideopenplan="{{nt.hideopenplan}}"  hidecloseplan="{{nt.hidecloseplan}}"  hidcontent="{{nt.hidcontent}}" hidurl="{{nt.hidurl}}" rowid={{rowid}}  >
           </aproval-book-teaching-card>
          </template> 
       </tr>
   </table>
   </div>
  </paper-dialog>
     
    
     <paper-dialog id="savedialog" modal>
       <h3><center>SUCCESS</center></h3>
       <center>
       <paper-button on-click="closedialog" style="color:white;background-color:black;margin-top: 15%;">OK</paper-button>
       </center>
     </paper-dialog>
  <paper-dialog id="conceptcheckid" modal>
       <h3><center>All Ready mapped for this concept  
do you want add this concept</center></h3>
       <center>
       <paper-button on-click="conceptyes" style="color:white;background-color:black;margin-top: 15%;">OK</paper-button>
         <paper-button on-click="conceptno" style="color:white;background-color:black;margin-top: 15%;">cancel</paper-button>
       </center>

     </paper-dialog>
      <paper-dialog id="failuredialog" modal>
       <h3><center>FAILURE</center></h3>
       <center>
           <paper-button on-click="failureclose" style="color:white;background-color:black;margin-top: 15%;">OK</paper-button>
       </center>
     </paper-dialog>
    <p hidden>{{id}}</p>
      
       <iron-ajax
        method="post"
        id="fngetbookvaluezajax"
        url="{{fngetbookvaluezurl}}"
        params="{{fngetbookvaluezparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fngetbookvaluezResponse"
        debounce-duration="300" />  
        </iron-ajax>
         <iron-ajax
        method="post"
        id="fngetsubconceptsajax"
        url="{{fngetsubconceptsurl}}"
        params="{{fngetsubconceptsparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fngetsubconceptsResponse"
        debounce-duration="300"/>
        </iron-ajax>
            <iron-ajax
        method="post"
        id="fngetsubconcepts1ajax"
        url="{{fngetsubconcepts1url}}"
        params="{{fngetsubconcepts1param}}"
        handle-as="json"
        content-type="application/json"
        on-response="fngetsubconcepts1Response"
        debounce-duration="300"/>
        </iron-ajax>
        <iron-ajax
        method="post"
        id="fngetskillsajax"
        url="{{fngetskillsurl}}"
        params="{{fngetskillsparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fngetskillsResponse"
        debounce-duration="300" />
       </iron-ajax>
       <iron-ajax
        method="post"
        id="fileuplodeajax"
        url="{{fileuplodeurl}}"
        params="{{fngetskillsparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fngetskillsResponse"
        debounce-duration="300" />
       </iron-ajax>
       <iron-ajax
        method="post"
        id="homeworkajax"
        url="{{homeworkurl}}"
        params="{{homeworkparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="homeworkResponse"
        debounce-duration="300" />
       </iron-ajax> 
        <iron-ajax
        method="post"
        id="seturlajax"
        url="{{seturlurl}}"
        params="{{seturlparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="seturlResponse"
        debounce-duration="300" />
       </iron-ajax>
       <iron-ajax
        method="post"
        id="checkconceptajax"
        url="{{checkconcepturl}}"
        params="{{checkconceptparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="checkconceptResponse"
        debounce-duration="300" />
       </iron-ajax> 
       <teacher-book-service-card id="bookservice"></teacher-book-service-card>
   </template>
<script type="text/javascript">
</script>

<script type="text/javascript">
   var rowid;
  var glfilename="";
  var homeglfilename="";
  var currenthomeurl="";
  var currentteachurl="";
  var teachertempaids=[];
  var hometeachertempaids=[];
  var mainurl="";
  var homefilearrurl=[];
  var teaceraidsarrurl=[];
  var currurls;
  var d=(new Date()).getDate()+"-"+((new Date()).getMonth()+1)+"-"+(new Date()).getFullYear();
function fnhomes(){
  
  
   
   hometeachertempaids.push({"filenames":homeglfilename});
     homefilearrurl.push({"homeurl":mainurl+"/"+d+homeglfilename,"filename":homeglfilename})
   currenthomeurl=mainurl+"/"+d+homeglfilename;
     var homefilenames="";
    var filenames="";
         for(var j=0;j<hometeachertempaids.length;j++){
             if(filenames=="")
                filenames=hometeachertempaids[j].filenames;
                else
                filenames=filenames+","+hometeachertempaids[j].filenames;
                this.filenames=filenames;
           }
      document.getElementById("homefomeid"+rowid).value=this.filenames;
      //   alert(JSON.stringify(teaceraidsarrurl));
     //   alert(JSON.stringify(teachertempaids));
       // alert(this.filenames);
    }


    


function fnhomeuplode(){

//alert(rowid);

    var x = document.getElementById("homefile"+rowid);
   
    var txt = "";
    if ('files' in x) {
        if (x.files.length == 0) {
            txt = "Select one or more files.";
        } else {
            for (var i = 0; i < x.files.length; i++) {
                txt += "<br><strong>" + (i+1) + ". file</strong><br>";
                var file = x.files[i];
                if ('name' in file) {
                    txt += "name: " + file.name + "<br>";
                homeglfilename=file.name;
                }
                if ('size' in file) {
                    txt += "size: " + file.size + " bytes <br>";
                }
            }
        }
    } 

    else {
        if (x.value == "") {
            txt += "Select one or more files.";
        } else {
            txt += "The files property is not supported by your browser!";
            txt  += "<br>The path of the selected file: " + x.value; // If the browser does not support the files property, it will return the path of the selected file instead. 
        }
    }
    
  
    
   
}

function fnfood1(){
var m=(new Date()).getDate()+"-"+((new Date()).getMonth()+1)+"-"+(new Date()).getFullYear();
   teachertempaids.push({"filenames":glfilename});
   teaceraidsarrurl.push({"teachurl":mainurl+"/"+m+glfilename,"filename":glfilename});
   currentteachurl=mainurl+"/"+m+glfilename;
   
     var filenames="";
         for(var j=0;j<teachertempaids.length;j++){
             if(filenames=="")
                filenames=teachertempaids[j].filenames;
                else
                filenames=filenames+","+teachertempaids[j].filenames;
                this.filenames=filenames;
           }
      document.getElementById("fomeid"+rowid).value=this.filenames;
   
    }

function eatFood(){
    var x = document.getElementById("myFile"+rowid);
    var txt = "";
    if ('files' in x) {
        if (x.files.length == 0) {
            txt = "Select one or more files.";
        } else {
            for (var i = 0; i < x.files.length; i++) {
                txt += "<br><strong>" + (i+1) + ". file</strong><br>";
                var file = x.files[i];
                if ('name' in file) {
                    txt += "name: " + file.name + "<br>";
                glfilename=file.name;
                }
                if ('size' in file) {
                    txt += "size: " + file.size + " bytes <br>";
                }
            }
        }
    } 

    else {
        if (x.value == ""){
            txt += "Select one or more files.";
        } else {
            txt += "The files property is not supported by your browser!";
            txt  += "<br>The path of the selected file: " + x.value; // If the 
        }
    }
    }
</script>
  <script>
  (function() {
    'use strict';
     
     var conarr=[];
     var valuearr=[];
     var skarr=[];
     var setsubarr=[];
     var sethomearr=[];
     var subsarrr=[];
     var techtemp=[];
     var hometemp=[];
     var trmp=[];
     var len1=0;
     var len2=0;
     var len11=0;
     var len12=0;
     var editpasshomeurl="";
     var editpassteachurl="";
      
    Polymer({
      is: 'aproval-book-innovatiosn-item-card',
  fnupload:function(){
     this.homeflag="";
  document.getElementById("teachingopendialog"+this.rowid).opened=false;
  },
  Fnhomeurl:function(e){
   if(document.querySelector("#homeurl"+this.id).checked==true){
      document.querySelector("#homecontent"+this.id).checked=false;
       this.homeflag="0";
   }
 
  },
  Fnhomecontent:function(e){
    this.homeflag="";
   if(document.querySelector("#homecontent"+this.id).checked==true){
      document.querySelector("#homeurl"+this.id).checked=false;
       this.homeflag="1";
   }
    },
    Fnurl:function(e){
      this.techflag="";
   if(document.querySelector("#url"+this.id).checked==true){
     this.techflag="0";
      document.querySelector("#content"+this.id).checked=false;
   }
 
  },
  Fncontent:function(e){
        this.techflag="";
     if(document.querySelector("#content"+this.id).checked==true){
      document.querySelector("#url"+this.id).checked=false;
        this.techflag="1";
   }
    },
 
 
ready:function()
    {      
            this.homeflag="";
            this.techflag="";
            this.remark="";
            this.innovation="";
            this.teachingaid="";
            this.currurl="";
            this.homeworkurl="";
            this.homework="";
      this.showdate=moment(new Date()).format('L');
       localStorage.setItem("localsess_from_service",this.showdate);
    
           },
   FnShowDialog:function(){
    this.date=new Date();
    this.$.dialog.toggle();
  },
fndates:function(e){
    this.showdate=moment(new Date()).format('L');
    localStorage.setItem("localsess_from_service",this.showdate);
  
},
  FnDismissDialog:function(e)
  { 
    if(e.detail.confirmed)
     {
      var pickdate=moment(this.$.picker.date).format('L');
      var dd1=new Date();
      var dd2=new Date(pickdate);
      var days=parseInt((dd1 - dd2) / (1000 * 60 * 60 * 24));
          if(days>0)
          {
        document.querySelector('aproval-book-innovatiosn-item-card').setdate();
          }
          else
          {
            this.showdate = moment(this.$.picker.date).format('L');
              localStorage.setItem("localsess_from_service",this.showdate);
          }      
      }
    },
    FnClear:function(){
      this.showdate = moment(new Date()).format('L');
    },
  

 
    fnsubmit1:function(e){
    
     this.$.dzfsd1xsasa.toggle();
     this.hidedbvalue=true;
     var temp1=[];
     for(var i=0;i<valuearr.length;i++){
      if(valuearr[i].rowid==this.rowid){
        temp1.push({"valuename":valuearr[i].valuename});
      }
     }

     this.mainarr=[];
     this.mainarr=temp1;
    },
    skillsave:function(e){
     this.$.fngetskilldialogid.toggle();
     this.hidedbskill=true;
        var temp1=[];
     for(var i=0;i<skarr.length;i++){
      if(skarr[i].rowid==this.rowid){
        temp1.push({"skillname":skarr[i].skillname});
      }
     }
     this.skillarrzx=[];
     this.skillarrzx=temp1;
     },
    subconcept:function(e){
      this.$.fngetdialogid.toggle();
      var temp1=[];
      this.hidedbsubconcept=true;
       for(var i=0;i<subsarrr.length;i++){
        if(subsarrr[i].rowid==this.rowid){
         temp1.push({"subconceptname":subsarrr[i].subconceptname});
      }
     }
     this.subconceptarr1=[];
     this.subconceptarr1=temp1;
     // alert(JSON.stringify(subsarrr));

   },

 homesave:function(e){
  var temp=[];

  this.homecurrurl=document.getElementById('homeworkvalu'+this.rowid).textarea.value;
  document.getElementById('homeworkvalu'+this.rowid).textarea.value=""; 
   if(this.homeflag=="" ){
    alert("pls insert the value");
   }
   else if(this.homecurrurl=="" && homeglfilename==""){
      alert("pls insert the value");
   }
  else{

   temp.push({"homeglfilename":"Home File Name","currenthomeurl":"currenthomeurl","homeflag":"homeflag","homecurrurl":"Home content/Url","fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","hidecloseplan":false,"hideopenplan":true});
    var obj={};
      obj.homeglfilename=homeglfilename;
      obj.currenthomeurl=currenthomeurl;
      obj.homeflag=this.homeflag;
      obj.homecurrurl=this.homecurrurl;
      obj.rowid=this.rowid;
   var flage=0;
       if(hometemp.length==0){
          hometemp.push(obj);
          }
     for(var i=0;i<hometemp.length;i++){
          if(hometemp[i].homecurrurl==this.homecurrurl){
             hometemp[i].fonts="";
             flage=1;
          }
          if(editpasshomeurl!=""){
            if(hometemp[i].homecurrurl==editpasshomeurl){
               flage=1;
              var home=hometemp[i].homeglfilename;
              var current=hometemp[i].currenthomeurl;
              var homeflag=hometemp[i].homeflag;
              var homecurrurl=hometemp[i].homecurrurl;
              var rowid=hometemp[i].rowid;
              hometemp.splice(i,1);
              var obj1={};
                  obj1.homefilename=home;
                  obj1.currenthomeurl=current;
                  obj1.homeflag=homeflag;
                  obj1.homecurrurl=this.homecurrurl;
                  obj1.rowid=rowid;
             hometemp.push(obj1);
           }
         }
   }
 if(flage==0){
        hometemp.push(obj);
        flage=1;
     }
  for(var i=0;i<hometemp.length;i++){
   if(hometemp[i].homeflag=="1"){
      hometemp[i].hidcontent=false;
      hometemp[i].hidurl=true;
    } 
  else if(hometemp[i].homeflag=="0"){
     hometemp[i].hidcontent=true;
     hometemp[i].hidurl=false;
   }
    hometemp[i].fonts="font-weight:bold;text-transform:uppercase;text-align:center;width:10%;";
     hometemp[i].hidecloseplan=true;
   hometemp[i].hideopenplan=false;
    temp.push(hometemp[i]);
    }
   this.currenthometemp=temp;
  }
  document.getElementById("homefile"+this.rowid).value="";
 },
Editpassvalue:function(values,id){
  editpasshomeurl=values;
   document.getElementById('homeworkvalu'+id).textarea.value=values;
  
},
Editpasscurrvalue:function(values,id){
   var deletehome=[];
      deletehome.push({"homefilename":"Home File Name","currenthomeurl":"currenthomeurl","homeflag":"homeflag","homecurrurl":"Home content/Url","fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","hidecloseplan":false,"hideopenplan":true});
     for(var i=0;i<hometemp.length;i++){
       if(hometemp[i].homecurrurl==values){
           hometemp.splice(i,1);
        }
      }
     for (var i=0;i<hometemp.length;i++){
        deletehome.push(hometemp[i]);
        }
document.querySelector('teacher-book-approve-card').currenthometemp=deletehome;
},
teachclosevalue:function(values,id){

   var deletehome=[];
   deletehome.push({"glfilename":"Teaching File Name","currentteachurl":"currentteachurl","techflag":"techflag","currurl":"Teching content/Url","fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","hidecloseplan":false,"hideopenplan":true});
     for(var i=0;i<techtemp.length;i++){
      if(techtemp[i].currurl==values){
          techtemp.splice(i,1);
       }
     }
   
    for (var i=0;i<techtemp.length;i++){
        deletehome.push(techtemp[i]);
        }
document.querySelector('teacher-book-approve-card').currenttechtemp=deletehome;
 },

Fnhomeworks:function(e){
   rowid=this.rowid;
      document.getElementById("homeworkdialog"+this.rowid).opened=true;
    mainurl="";  
    this.homefileprefix="Homework"+"/"+sessionStorage.getItem("curr_sess_loggedschoolid")+"/"+localStorage.getItem("curr_sess_academicyear")+"/"+localStorage.getItem("curr_sess_subjectid")+"/"+localStorage.getItem("curr_sess_gradeid")+"/"+sessionStorage.getItem("termid")+"/"+localStorage.getItem("curr_sess_chapterid")+"/"+this.rowid;
  mainurl=this.homefileprefix;
 //this.Fnpasshomeworks();
},
  Fnpasshomeworks:function(){
   
    this.homeworkurl=sessionStorage.getItem("addrinfo")+"/homeworkurl";
    var obj={};
        obj.homefileprefix=this.homefileprefix;
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear"); 
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.chapterid=localStorage.getItem("curr_sess_chapterid");
        obj.chaptername=localStorage.getItem("curr_sess_chaptername");
        obj.conceptid=localStorage.getItem("curr_sess_conceptid");
        obj.conceptid=localStorage.getItem("curr_sess_conceptid");
        obj.termid=sessionStorage.getItem("termid");
        obj.rowid=this.rowid;
         this.homeworkparam=obj;
        this.$.homeworkajax.generateRequest();
    },
  homeworkResponse:function(e){
     var res=e.detail.response.returnval;
      
     var flg=0;
     if(res=="invalid") {
       if(hometemp.length==0)
        this.currenthometemp="";
        else{
             for(var i=0;i<hometemp.length;i++){
                if(this.rowid==hometemp[i].rowid){
                  flg=1;
                   break; 
                }}
            if(flg==0)
       this.currenthometemp=""; 
        }
     }
     else{
       var deletehome=[];
       deletehome.push({"homefilename":"Home File Name","currenthomeurl":"currenthomeurl","homeflag":"homeflag","homecurrurl":"Home content/Url","fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","hidecloseplan":false,"hideopenplan":true});
       for(var i=0;i<res.length;i++){
        var obj={};
        obj.homeglfilename=res[i].filename;
        obj.currenthomeurl=res[i].url;
        obj.homeflag=res[i].flag;
        obj.homecurrurl=res[i].link;
        obj.rowid=res[i].row_id;
        hometemp.push(obj);
      }
for(var i=0;i<hometemp.length;i++){
      if(hometemp[i].homeflag=="1"){
      hometemp[i].hidcontent=false;
      hometemp[i].hidurl=true;
      } 
    else if(hometemp[i].homeflag=="0"){
     hometemp[i].hidcontent=true;
     hometemp[i].hidurl=false;
   }
    hometemp[i].fonts="font-weight:bold;text-transform:uppercase;text-align:center;width:10%;";
   hometemp[i].hidecloseplan=true;
   hometemp[i].hideopenplan=false;
    deletehome.push(hometemp[i]);
    }
   this.currenthometemp=deletehome;
}
  },
fnteachingaid:function(e){
 document.getElementById("teachingopendialog"+this.rowid).opened=true;
      rowid=this.rowid;
   
     mainurl="";
    this.fileprefix="Teachingaid"+"/"+sessionStorage.getItem("curr_sess_loggedschoolid")+"/"+localStorage.getItem("curr_sess_academicyear")+"/"+localStorage.getItem("curr_sess_subjectid")+"/"+localStorage.getItem("curr_sess_gradeid")+"/"+sessionStorage.getItem("termid")+"/"+localStorage.getItem("curr_sess_chapterid")+"/"+this.rowid;
   // this.Fnpassteachingid();
},

    Fnpassteachingid:function()
    {
   
        
    this.seturlurl=sessionStorage.getItem("addrinfo")+"/lessonplanseturl";
     var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear"); 
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.chapterid=localStorage.getItem("curr_sess_chapterid");
        obj.chaptername=localStorage.getItem("curr_sess_chaptername");
        obj.conceptid=localStorage.getItem("curr_sess_conceptid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.rowid=this.rowid
        obj.fileprefix=this.fileprefix;
        this.seturlparam=obj;
        this.$.seturlajax.generateRequest();
        mainurl=this.fileprefix;
     },
 seturlResponse:function(e){
 var res=e.detail.response.returnval;
      
     var flg=0;
     if(res=="invalid") {
       if(techtemp.length==0)
        this.currenttechtemp="";
        else{
             for(var i=0;i<techtemp.length;i++){
                if(this.rowid==techtemp[i].rowid){
                  flg=1;
                   break; 
                }}
            if(flg==0)
        this.currenttechtemp=""; 
        }
     }
     else{
       var deletehome=[];
       deletehome.push({"glfilename":"Teaching File Name","currentteachurl":"currentteachurl","techflag":"techflag","currurl":"Teching content/Url","fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","hidecloseplan":false,"hideopenplan":true});
       for(var i=0;i<res.length;i++){
        var obj={};
        obj.glfilename=res[i].filename;
        obj.currentteachurl=res[i].url;
        obj.techflag=res[i].flag;
        obj.currurl=res[i].link;
        obj.rowid=res[i].row_id;
        techtemp.push(obj);
      }


     for(var i=0;i<techtemp.length;i++){
      if(techtemp[i].techflag=="1"){
      techtemp[i].hidcontent=false;
      techtemp[i].hidurl=true;
      } 
    else if(techtemp[i].techflag=="0"){
     techtemp[i].hidcontent=true;
     techtemp[i].hidurl=false;
   }
    techtemp[i].fonts="font-weight:bold;text-transform:uppercase;text-align:center;width:10%;";
   techtemp[i].hidecloseplan=true;
   techtemp[i].hideopenplan=false;
    deletehome.push(techtemp[i]);
    }
   this.currenttechtemp=deletehome;
}

 },  


 Teachsave:function(e){




 var temp=[];

  this.currurl=document.getElementById('curriculam'+this.rowid).textarea.value;
  document.getElementById('curriculam'+this.rowid).textarea.value=""; 
   if(this.techflag=="" ){
    alert("pls insert the value");
   }
   else if(this.currurl=="" && glfilename==""){
      alert("pls insert the value");
   }
  else{

   temp.push({"glfilename":"Teaching File Name","currentteachurl":"currentteachurl","techflag":"techflag","currurl":"Teching content/Url","fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","hidecloseplan":false,"hideopenplan":true});
   
var obj={};
      obj.glfilename=glfilename;
      obj.currentteachurl=currentteachurl;
      obj.techflag=this.techflag;
      obj.currurl=this.currurl;
      obj.rowid=this.rowid;
      
 var flage=0;
       if(techtemp.length==0){
          techtemp.push(obj);
          }
     for(var i=0;i<techtemp.length;i++){
          if(techtemp[i].currurl==this.currurl){
             techtemp[i].fonts="";
             flage=1;
          }
          if(editpassteachurl!=""){
            if(techtemp[i].currurl==editpassteachurl){
               flage=1;
              var teach=techtemp[i].glfilename;
              var current=techtemp[i].currentteachurl;
              var techflag=techtemp[i].techflag;
              var currurl=techtemp[i].currurl;
              var rowid=techtemp[i].rowid;
              techtemp.splice(i,1);
              var obj1={};
                  obj1.glfilename=teach;
                  obj1.currentteachurl=current;
                  obj1.techflag=techflag;
                  obj1.currurl=this.currurl;
                  obj1.rowid=rowid;
             techtemp.push(obj1);
           }
         }
   }
 if(flage==0){
        techtemp.push(obj);
        flage=1;
     }
  for(var i=0;i<techtemp.length;i++){
   if(techtemp[i].techflag=="1"){
      techtemp[i].hidcontent=false;
      techtemp[i].hidurl=true;
    } 
  else if(techtemp[i].techflag=="0"){
     techtemp[i].hidcontent=true;
     techtemp[i].hidurl=false;
   }
    
     techtemp[i].fonts="font-weight:bold;text-transform:uppercase;text-align:center;width:10%;";
   techtemp[i].hidecloseplan=true;
   techtemp[i].hideopenplan=false;
    temp.push(techtemp[i]);
    }
  
   this.currenttechtemp=temp;
   document.getElementById("myFile"+this.rowid).value="";
 }
},
Editteachvalue:function(values,id){
  editpassteachurl=values;
   document.getElementById('curriculam'+id).textarea.value=values;
  
},


fnpasssubarr:function(subsarr){
    subsarrr=subsarr;
    },
fnpassskillarr:function(skillarrr){
      skarr=skillarrr;
    }, 
workvalue:function(workarr){
 
      hworkarr=workarr;
      }, 
fnpasparr1:function(e){
    valuearr=e;
    },

fnconceptvalue:function(arr){
  conarr=arr;
  },
    fnclose1:function(e){
     this.$.dzfsd1xsasa.close();
     document.querySelector('aproval-book').newRefreshdddd();
    },
  fnsavebook:function(e)
    {

if(conarr.length!=0 && valuearr.length!=0 && skarr.length!=0 &&hometemp.length!=0 && techtemp.length!=0)
      {
        if(this.period==""|| this.period==null)
            {
               alert("Please Enter All Fields");
               this.hidecheck1=false;
               this.hidecheck=true;
            }
           
    else if(this.planneddate=="empty")
        {
          this.checkconcept();
        }
     else  
        {
          this.$.bookservice.fnmasterplanedit(conarr,valuearr,skarr,subsarrr,this.period,this.innovation,this.remark,this.rowid,this.sno,techtemp,hometemp);
         }
     
           }
           else{
            alert("pls check the value");
           }
       },
       checkconcept:function(){
      this.checkconcepturl=sessionStorage.getItem("addrinfo")+"/checkconcept-service";
        var obj={};




         obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear"); 
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.chapterid=localStorage.getItem("curr_sess_chapterid");
        obj.chaptername=localStorage.getItem("curr_sess_chaptername");
        obj.termid=sessionStorage.getItem("termid");
        obj.rowid=this.rowid;
         this.checkconceptparam=obj;
        this.$.checkconceptajax.generateRequest();    
       
       },
       checkconceptResponse:function(e){
         var res1=e.detail.response.returnval;
         
       if(res1=='invalid'){
       this.$.bookservice.fnmasterplandisplyinsert(conarr,valuearr,skarr,subsarrr,this.period,this.innovation,this.remark,this.rowid,this.sno,techtemp,hometemp);
         res1=[];
       }
       else{
       var flagg=0;
       var gltemp=[];

         if(res1!=""){
     for(var n=0;n<res1.length;n++){
         var k;
         var temp=[];
         k=res1[n].concept_id;
             temp=k.split(",");
            for(var i=0;i<temp.length;i++){ 
                   gltemp.push(temp[i]);
              }
        }
        }
   for(var i=0;i<conarr.length;i++){
     for(var j=0;j<gltemp.length;j++){
      if(conarr[i].conceptid==gltemp[j]){
        flagg=1;
        gltemp=[];
         break;
          }}}

       }
   if(flagg==1){
        this.fnpassconceptcheckvalue();
            flagg=0;
            res1=[];
            }
    if(res1.length>0){
        this.$.bookservice.fnmasterplandisplyinsert(conarr,valuearr,skarr,subsarrr,this.period,this.innovation,this.remark,this.rowid,this.sno,techtemp,hometemp);
      }
},
       fnpassconceptcheckvalue:function(e){
        
        this.$.conceptcheckid.open();

       },
       conceptyes:function(e){
      
        this.$.bookservice.fnmasterplandisplyinsert(conarr,valuearr,skarr,subsarrr,this.period,this.innovation,this.remark,this.rowid,this.sno,techtemp,hometemp);
       this.$.conceptcheckid.close();
       },
       conceptno:function(e){
        
        this.$.conceptcheckid.close();
         this.conceptzz="";
         document.querySelector('teacher-book-approve-card').conceptzz=this.conceptzz;
        this.allrefesh1();
       },
  edifref:function(){

          this.bldvaluez="";
  document.querySelector('aproval-book-concept-card').FnClear(this.id);
            this.currenttechtemp="";
            this.currenthometemp="";
            this.homeflag="";
            this.techflag="";
            this.mainarr="";
            this.skillarrzx="";
            this.subconceptarr1="";
            this.homeworks="";
            this.hidedbvalue=false;
            this.hidedbskill=false;
            this.hidedbhomewok=false;
            this.hidedbsubconcept=false;
            subsarrr=[];
            this.subconceptarr=""; 
            hometemp=[]; 
            techtemp=[];
      },
     allrefesh1:function(){
        
         this.subconceptarr1="";
         this.period="";
         this.skillarrzx="";
         this.mainarr="";
         this.hidecheck1=false;
         this.hidecheck=true;
         document.getElementById('homeworkvalu'+this.rowid).textarea.value="";
         document.getElementById('curriculam'+this.rowid).textarea.value="";
         this.innovation="";
         this.remark="";
         this.showdate=moment(new Date()).format('L');
         localStorage.setItem("localsess_from_service",this.showdate);
         this.currenttechtemp="";
         this.currenthometemp="";
         glfilename="";
         teachertempaids=[];
         this.currurl="";
         this.homecurrurl="";
          glfilename="";;
            teachertempaids=[];
            homeglfilename="";;
            hometeachertempaids=[];
            mainurl="";
            homefilearrurl=[];
            teaceraidsarrurl=[];
            setsubarr=[];
            sethomearr=[];
            trmp=[];
            conarr=[];
            valuearr=[];
            skarr=[];
            setsubarr=[];
            sethomearr=[];
            subsarrr=[];
            this.subconceptarr=""; 
            hometemp=[]; 
            techtemp=[];
           this.currurl="";
          
           if(skarr.length!=0)   
            document.querySelector('skill-dialog-card').fnclean1();
           if(subsarrr.length!=0) 
            document.querySelector('subconcept-dialog-card').fnclean1();
            if(conarr.length!=0) 
              document.querySelector('aproval-book-concept-card').FnClear();
            if(valuearr.length!=0) 
           document.querySelector('aproval-book').fnclean1();
     },
allrefesh:function(){
         
            
            
            //this.homeworks="";
            this.hidecheck1=true;
            this.hidecheck=false;  
            this.planneddate="";
            this.currurl="";
            this.hidedbvalue=false;
            this.hidedbskill=false;
            this.hidedbsubconcept=false;
            this.hidedbhomewok=false;
            glfilename="";
            teachertempaids=[];
            this.currurl="";
            this.homecurrurl="";
            glfilename="";;
            teachertempaids=[];
            homeglfilename="";;
            hometeachertempaids=[];
            mainurl="";
            homefilearrurl=[];
            teaceraidsarrurl=[];
            setsubarr=[];
            sethomearr=[];
            trmp=[];
           conarr=[];
            valuearr=[];
            skarr=[];
            setsubarr=[];
            sethomearr=[];
            subsarrr=[];
           this.subconceptarr=""; 
            hometemp=[]; 
            techtemp=[];
      
            if(skarr.length!=0)   
            document.querySelector('skill-dialog-card').fnclean1();
           if(subsarrr.length!=0) 
            document.querySelector('subconcept-dialog-card').fnclean1();
            if(conarr.length!=0) 
              document.querySelector('aproval-book-concept-card').FnClear();
            if(valuearr.length!=0) 
           document.querySelector('aproval-book').fnclean1();
},
    fngetconceptz1:function(e){
       this.$.dzfsd1xsasa.toggle(); 
      this.fngetinchaptvaluevalue();
    },

    fngetsubconcept:function(e){
        this.$.fngetdialogid.toggle();
     this.fnsubcondialog();
    },

  fnsubcondialog1:function(rowid1,iddate1){
   // alert(1);
    
    this.rowid1=rowid1;
    this.iddate1=iddate1;
   var localconarr=[];
   if(conarr.length!=0){
 for(var i=0;i<conarr.length;i++){
      if(this.rowid1==conarr[i].rowid)      
      localconarr.push(conarr[i]);
     } 
   }
     
     len1=localconarr.length;
     for(var i=0;i<localconarr.length;i++){
     this.fngetsubconcepts1url=sessionStorage.getItem("addrinfo")+"/fngetsubconcepts-service";
     var obj={};
     obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
     obj.academic_year=localStorage.getItem("curr_sess_academicyear");
     obj.capter_id=localStorage.getItem("curr_sess_capters");
     obj.subjectid=sessionStorage.getItem("subjectidz");
     obj.gradeid=sessionStorage.getItem("grdeidz");
     obj.termid=sessionStorage.getItem("termid");
     obj.period=this.period;
     obj.conceptid=localconarr[i].conceptid;
     obj.conceptname=localconarr[i].conceptname;
     obj.planneddate=this.planneddate;
     obj.rowid=this.rowid1;
     this.fngetsubconcepts1param=obj;
   //  alert(JSON.stringify(obj));
     this.$.fngetsubconcepts1ajax.generateRequest();
     }
    },
fngetsubconcepts1Response:function(e){
   
      var res=e.detail.response.conceptarr;
      var res3=e.detail.response.dbarr;
      var res1=e.detail.response.skillarr;
      var t1=[];
      var t2=[];
      len2++;  
          for(var i=0;i<res.length;i++){
              var obj={};
              obj.sub_concept_id=res[i].sub_concept_id;
              obj.sub_concept_name=res[i].sub_concept_name;
              obj.concept =res[i].concept;
              obj.concept_id=res[i].concept_id;
              t1.push(obj);
          }
          for(var i=0;i<res3.length;i++){
              var obj={};
              trmp.push(obj);
          }
          for(var i=0;i<t1.length;i++){
              setsubarr.push(t1[i]);
             }
          if(len1==len2){
                this.subconceptarr=[];
              for(var i=0;i<setsubarr.length;i++){
            t2.push(setsubarr[i]);
           }
      var temp=[];
      var k;
      if(res1!=""){
         k=res1[0].sub_concept_id;
         temp=k.split(",");
       }
   
     if(subsarrr.length==0){
     for(var j=0;j<t2.length;j++)
          {
            var flag=0;
              for(var i=0;i<temp.length;i++)
              {  
                if(t2[j].sub_concept_id==temp[i])
                  { 
                   flag=1;
                   t2[j].check=true;   
                   var obj={};
                   obj.subconceptid=t2[j].sub_concept_id;
                   obj.subconceptname=t2[j].sub_concept_name;
                   obj.concept=t2[j].concept;
                   obj.conceptid=t2[j].concept_id;
                   obj.rowid=this.rowid1;
                   obj.id="VVYJ"+this.rowid1+this.iddate1+t2[j].sub_concept_id;
                   subsarrr.push(obj);
                    }}
             if(flag==0)
                 {
                  t2[j].check=false;
                 }}}


  for(var j=0;j<t2.length;j++){
   var flag=0;
          for(var i=0;i<subsarrr.length;i++){
 if(subsarrr[i].subconceptid==t2[j].sub_concept_id&&this.rowid1==subsarrr[i].rowid){
           flag=1;
            t2[j].check=true;
         }}
       if(flag==0)
      t2[j].check=false;
     }
//alert(JSON.stringify(t2));
        this.subconceptarr=t2;
          setsubarr=[]; 
           len1=0;
           len2=0;
          }

// alert(JSON.stringify(subsarrr));

    },


  fnsubcondialog:function(e){
   // alert(1);
  
   
    var localconarr=[];
     if(conarr.length!=0){
      for(var i=0;i<conarr.length;i++){
      if(this.rowid==conarr[i].rowid)      
      localconarr.push(conarr[i]);
     } 
     }
     len1=localconarr.length;
     for(var i=0;i<localconarr.length;i++){
     this.fngetsubconceptsurl=sessionStorage.getItem("addrinfo")+"/fngetsubconcepts-service";
     var obj={};
     obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
     obj.academic_year=localStorage.getItem("curr_sess_academicyear");
     obj.capter_id=localStorage.getItem("curr_sess_capters");
     obj.subjectid=sessionStorage.getItem("subjectidz");
     obj.gradeid=sessionStorage.getItem("grdeidz");
     obj.termid=sessionStorage.getItem("termid");
     obj.period=this.period;
     obj.conceptid=localconarr[i].conceptid;
     obj.conceptname=localconarr[i].conceptname;
     obj.planneddate=this.planneddate;
     obj.rowid=this.rowid;
     this.fngetsubconceptsparam=obj;
    // alert(JSON.stringify(obj));
     this.$.fngetsubconceptsajax.generateRequest();
     }
    },
fngetsubconceptsResponse:function(e){
   
      var res=e.detail.response.conceptarr;
      var res3=e.detail.response.dbarr;
      var res1=e.detail.response.skillarr;
      var t1=[];
      var t2=[];
      len2++;  
          for(var i=0;i<res.length;i++){
              var obj={};
              obj.sub_concept_id=res[i].sub_concept_id;
              obj.sub_concept_name=res[i].sub_concept_name;
              obj.concept =res[i].concept;
              obj.concept_id=res[i].concept_id;
              t1.push(obj);
          }
          for(var i=0;i<res3.length;i++){
              var obj={};
              trmp.push(obj);
          }
          for(var i=0;i<t1.length;i++){
              setsubarr.push(t1[i]);
             }
          if(len1==len2){
                this.subconceptarr=[];
              for(var i=0;i<setsubarr.length;i++){
            t2.push(setsubarr[i]);
           }
      var temp=[];
      var k;
      if(res1!=""){
         k=res1[0].sub_concept_id;
         temp=k.split(",");
       }
   
     if(subsarrr.length==0){
     for(var j=0;j<t2.length;j++)
          {
            var flag=0;
              for(var i=0;i<temp.length;i++)
              {  
                if(t2[j].sub_concept_id==temp[i])
                  { 
                   flag=1;
                   t2[j].check=true;   
                   var obj={};
                   obj.subconceptid=t2[j].sub_concept_id;
                   obj.subconceptname=t2[j].sub_concept_name;
                   obj.concept=t2[j].concept;
                   obj.conceptid=t2[j].concept_id;
                   obj.rowid=this.rowid;
                   obj.id="VVYJ"+this.rowid+this.iddate+t2[j].sub_concept_id;
                   subsarrr.push(obj);
                    }}
             if(flag==0)
                 {
                  t2[j].check=false;
                 }}}


  for(var j=0;j<t2.length;j++){
   var flag=0;
          for(var i=0;i<subsarrr.length;i++){
 if(subsarrr[i].subconceptid==t2[j].sub_concept_id&&this.rowid==subsarrr[i].rowid){
           flag=1;
            t2[j].check=true;
         }}
       if(flag==0)
      t2[j].check=false;
     }
//alert(JSON.stringify(t2));
        this.subconceptarr=t2;
          setsubarr=[]; 
           len1=0;
           len2=0;
          }

 //alert(JSON.stringify(subsarrr));

    },
fngetskill:function(e){
    this.$.fngetskilldialogid.toggle();
   this.fnskilldialog();
    
    },
   
    fnskilldialog:function(e){
  this.fngetskillsurl=sessionStorage.getItem("addrinfo")+"/fngetskills-service";
   var obj={};
   var consplit=[];
   var subsplit=[];
   var m;
   var k;
   if(this.conceptid!=""){
    consplit=this.conceptid.split(",");
    subsplit=this.subconceptid.split(",");
   for(var i=0;i<consplit.length;i++){
            m=consplit[i];
          }
   for(var j=0;j<subsplit.length;j++){
            k=subsplit[j];
          }
   }
  obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
   obj.academic_year=localStorage.getItem("curr_sess_academicyear");
   obj.capter_id=localStorage.getItem("curr_sess_capters");
     obj.subjectid=sessionStorage.getItem("subjectidz");
        obj.gradeid=sessionStorage.getItem("grdeidz");
        obj.termid=sessionStorage.getItem("termid"); 
    obj.rowid=this.rowidz;
   this.fngetskillsparam=obj;
   this.$.fngetskillsajax.generateRequest();
    },
fngetskillsResponse:function(e){
      var res=e.detail.response.conceptarr;
      var res1=e.detail.response.skillarr;
      var temp=[];
      var temp1=[];
      var k;
        
    if(res1!=""){
     k=res1[0].skillid;
     temp=k.split(",");
       }
     if(skarr.length==0){
     for(var j=0;j<res.length;j++)
          {
            var flag=0;
              for(var i=0;i<temp.length;i++)
              {  
                if(res[j].skill_id==temp[i])
                  { 
                   flag=1;
                   res[j].check=true;   
                   var obj={};
                     obj.id="VVYJ"+this.rowid+this.iddate+res[j].skill_id;
                     obj.rowid=this.rowid;
                     obj.skillid=res[j].skill_id;
                     obj.skillname=res[j].skill_name;
                     skarr.push(obj);
                    }}
             if(flag==0)
                 {
                  res[j].check=false;
                 }}}


 if(skarr.length>0){
        for(var i=0;i<skarr.length;i++){

          for(var j=0;j<res.length;j++){
             if(skarr[i].skillid==res[j].skill_id&&this.rowid==skarr[i].rowid){
            res[j].check=true;
          }}}}
          this.skillarrz=res;
    },  

Fnhomework:function(e){

},



fnsett:function(e){
document.querySelector('skill-dialog-card').dbarrvalue(skarr);
},
bldedit:function(e){
//document.querySelector('homework-card').dbarrvalue(hworkarr);
},
fneditsetvalue:function(e){
document.querySelector('aproval-book').setvaluesz(valuearr);
},

fnsetsubchapterz:function(e){
document.querySelector('subconcept-dialog-card').setsubchpterclean(subsarrr);
},

    fngetinchaptvaluevalue:function(e){
    this.fngetbookvaluezurl=sessionStorage.getItem("addrinfo")+"/fngetconceptvalue111-service";
      var m;
      var k;
      var consplit=[];
      var subsplit=[];
    if(this.conceptid!=""){
    consplit=this.conceptid.split(",");
    subsplit=this.subconceptid.split(",");
   for(var i=0;i<consplit.length;i++){
            m=consplit[i];
          }
   for(var j=0;j<subsplit.length;j++){
            k=subsplit[j];
          }
   }
      var obj={};
    obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
obj.academic_year=localStorage.getItem("curr_sess_academicyear");
obj.capter_id=localStorage.getItem("curr_sess_capters");
  obj.subjectid=sessionStorage.getItem("subjectidz");
        obj.gradeid=sessionStorage.getItem("grdeidz");
        obj.termid=sessionStorage.getItem("termid"); 
obj.rowid=this.rowidz;
this.fngetbookvaluezparam=obj;
    
    this.$.fngetbookvaluezajax.generateRequest();
    },
    fngetbookvaluezResponse:function(e){
      var res1=e.detail.response.skillarr;
      var res=e.detail.response.conceptarr;
      var temp=[];
      var temp1=[];
      var k;
    if(res1!=""){
     k=res1[0].valueid;
     temp=k.split(",");
       }
    
 if(valuearr.length==0){
     
          for(var j=0;j<res.length;j++){
            var flag=0;
           for(var i=0;i<temp.length;i++){
                  
                  if(res[j].value_id==temp[i])
                  {    
                   flag=1;
                   res[j].check=true;  
                    var obj={}; 
                    obj.valueid=res[j].value_id;
                    obj.valuename=res[j].value_name;
                    obj.rowid=this.rowid;
                    obj.id="VVYJ"+this.rowid+this.iddate+res[j].value_id;
                    valuearr.push(obj); 
                  }
                 }
                 if(flag==0){
                  res[j].check=false;
                 }}}
    if(valuearr.length>0){
         for(var i=0;i<valuearr.length;i++){
            for(var j=0;j<res.length;j++){
             if(valuearr[i].valueid==res[j].value_id&&this.rowid==valuearr[i].rowid){
            res[j].check=true;
            }
          }
        }
      } 
            //  alert(JSON.stringify(valuearr));

  this.valuearrz=res;            
},
fndelete:function(e){
    this.$.bookservice.buffdel();
    },
     fneditbook:function(e){
     this.showdate=this.planneddate;
     this.currenthometemp="";
     this.currenttechtemp="";
     localStorage.setItem("localsess_last_service",this.plannedtoate);
     localStorage.setItem("localsess_from_service",this.planneddate);
     localStorage.setItem("assement_curr_sess_date",this.assesmentdate);
      this.fnskilldialog();
      this.fngetinchaptvaluevalue();
      this.Fnpassteachingid();
      this.Fnpasshomeworks();
       conarr=[];
       valuearr=[];
       skarr=[];
       subsarrr=[];
       hometemp=[];
       techtemp=[];
     document.querySelector('aproval-book-concept-card').fngetconceptcheck1(this.rowidz,this.iddate);
      this.hidecheck1=false;
      this.hidecheck=true;
      this.innovattionvaluezs=false;
      this.$.rmcls1.hidden=true;
      this.$.innvtt.hidden=true;
       
  document.querySelector('aproval-book-concept-card').fnref(this.id);
    },
 
    
    lsnskill:function(e)
    {
      this.$.skilldialog.toggle();
      //this.skillvaluezs=true;
    },
    subconceptclose:function(e){
     this.$.fngetdialogid.close();
     if(subsarrr.length!=0)
     document.querySelector('subconcept-dialog-card').fnrefreshccc();
      },
     skillclose:function()
    {
    this.$.fngetskilldialogid.close();
    document.querySelector('skill-dialog-card').FnRefreshhhh();
    },
 

  
    remarkclose:function()
    {
      this.$.remarkdialog.close();
      this.remark="";
    },
   
  

    fnhomeaids:function(e)
    {
    document.getElementById('homeaidsinfoid'+this.rowid).textarea.value=this.homeaids;
    this.$.fnhomeaidsdialog.open();
    },
     homeaidssave:function(e)
    {
      this.homeaids=document.getElementById('homeaidsinfoid'+this.rowid).textarea.value;
      this.$.fnhomeaidsdialog.toggle();
     },
      homeclose:function()
    {
      this.$.fnhomeaidsdialog.close();
      this.homeaids="";
    },

    innovatclose:function()
    {
      this.$.innovationdialog.close();
      this.innovation="";
    },
   innovatsave:function(e)
    {
      this.$.innovationdialog.toggle();
      this.innovation=document.getElementById('innovatetextsssss'+this.rowid).textarea.value;
     },
      lsninnovation:function(e)
    {
      this.$.innovationdialog.open();
      document.getElementById('innovatetextsssss'+this.rowid).textarea.value=this.innovation;
    },
     lsnremark:function(e)
    {
      this.$.remarkdialog.open();
      document.getElementById('remarkareaaaaa11'+this.rowid).textarea.value=this.remark;
     
    },
     remarksave:function(e)
    {
      this.remark=document.getElementById('remarkareaaaaa11'+this.rowid).textarea.value;
      this.$.remarkdialog.toggle();
    },
    setdate:function()
    {
      alert('You are allowed to select future date only..!');
    },
    
 
   

    closeteachingaaid:function()
    {
     document.getElementById("teachingopendialog"+this.rowid).opened=false;
    this.currurl=document.getElementById('homeworkvalu'+this.rowid).textarea.value;
     
    },
   /* Teachsave:function()
    {
     document.getElementById("teachingopendialog"+this.rowid).opened=false;
    this.currurl=document.getElementById('homeworkvalu'+this.rowid).textarea.value;
     
    },*/
    closehomeid:function(e){
    
   // document.querySelector('homework-card').FnRefreshhhh();
       document.getElementById("homeworkdialog"+this.rowid).opened=false;
       this.homecurrurl=document.getElementById('homeworkvalu'+this.rowid).textarea.value;

    },
   
    closedialog:function()
     {
      this.$.savedialog.close();
     },
     saveopendialog:function()
     {
            this.$.savedialog.toggle();
             conarr=[];
             valuearr=[];
             skarr=[];
        
            document.querySelector('concept-check-card').fnclean();
            document.querySelector('aproval-book').fnclean1();
            document.querySelector('skill-dialog-card').fnclean1();
           // document.querySelector('homework-card').fnclean1();
            document.querySelector('subconcept-dialog-card').fnclean1();
     },
     failureopen:function()
     {
      this.$.failuredialog.toggle();
     },
     failureclose:function()
     {
      this.$.failuredialog.close()
     }


   });
  })();
  </script>
</dom-module>
