
<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="../neon-animation/web-animations.html">
<link rel="import" href="../neon-animation/animations/scale-up-animation.html">
<link rel="import" href="../neon-animation/animations/fade-out-animation.html">
<dom-module id="curriculum-assesment-card">
  <template>
    <style>
      :host {
        display: block;
      } table{
        border-collapse: collapse;
        width: 100%;

      }
      table { table-layout:fixed; }
      table td { overflow: hidden; }

      th,td{
     /* border-top: 1px solid #ddd; border-bottom: 1px solid #ddd;*/
      border-left: 1px solid #ddd;
      border-right: 1px solid #ddd;
     }
      #fnsetdialogs
      {
        border-radius: 10px;
    width: 650px;
    height: 300px;
    margin-left: 24%;
      }
      .exceldiv{
       margin-top: 8%;
       margin-left: -59%;
      } 
      .exceldiv1{
       margin-top: -5%;
      margin-left: 25%;
      }
       .exceldiv2{
         margin-top: -12%;
         margin-left: 68%;
      } 
      #curriculamenrichmentdialog11
      {
   border-radius: 30px;
    width: 34%;
    height: 33%;
    margin-left: 33%;
   
      }  #curriculamcorrectiondialog
      {
        border-radius: 30px;
    width: 34%;
    height: 33%;
    margin-left: 33%;
    overflow-x: hidden;
    overflow-y: scroll;
      } 
      #curriculamdialog
      {
        border-radius: 30px;
    width: 34%;
    height: 33%;
    margin-left: 33%;
    
      } #curriculamenrichmentdialog111
      {
    border-radius: 30px;
    width: 34%;
    height: 33%;
    margin-left: 33%;
   
      } 
     
    </style>
        <div hidden>{{id}}{{rowid}}{{chapterid}}{{chaptername}}{{conceptid}}{{subconceptid}}{{fromdate}}{{todate}}{{editvalue}}{{skill}}{{value}}{{innovation}}{{coremarks}}{{period}}
      </div>
    <div>
       <table  class="teach1" >
         <tr>
          <td style="{{fonts}}" width="2%" >{{sno}}</td>
          <td style="{{fonts}}" width="10%">{{conceptname}}</td>
          <td style="{{fonts}}" width="10%">{{subconceptname}}</td>
          <td style="{{fonts}}" width="10%">{{assesmentdate}} </td>
          <td style="{{fonts}}" width="10%">
            <div hidden$="{{hideinfovalue}}">
             <p hidden$="{{hideopenplan}}">{{assesmenttype}}</p>
              <div hidden$="{{hidecloseplan}}"> 
              <paper-checkbox id="cpayes1{{id}}"  on-change="fnchange">Completed </paper-checkbox>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div>
            </div>
            <div hidden$="{{hideinfovalue1}}">
             <div style="text-transform:uppercase;">Download Mark Here</div> <paper-icon-button id="downloads" icon="icons:file-download" on-click="fnassmentmark"></paper-icon-button>
            <paper-tooltip for="download">Download</paper-tooltip>
           </div>
         </td>
      
         <td style="{{fonts}}"  width="10%">
           <div hidden$="{{hideinfovalue}}">
           <p hidden$="{{hideopenplan}}">{{completiondate}}</p>
          <complection-date-picker-card hidden$="{{hidecloseplan}}"></complection-date-picker-card>
          </div>
          <div hidden$="{{hideinfovalue1}}">
           <p>{{completiondate}}</p>
          </div>
        </td>
          <td style="{{fonts}}"  width="10%">
           <paper-button on-click="fncorrection">{{correctionstatus}}</paper-button>
       </td>
       
         <td style="{{fonts}}"  width="10%">

          <div hidden$="{{hideinfovalue}}">
           <p hidden$="{{hideopenplan}}">{{completionstatus}}</p>
           <P hidden$="{{hidecloseplan}}"> 
             <paper-checkbox id="cpayes{{id}}" checked="{{check}}"  on-change="fncompletestaus">Completed</paper-checkbox>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
             <paper-checkbox hidden id="cpano{{subconceptid}}" checked on-change="FnNo">  Not Completed</paper-checkbox>
          </P>
        </div>
         <div hidden$="{{hideinfovalue1}}">
           <p style="color:green">Completed</p>
         </div>
        </td>
        <td style="{{fonts}}"  width="2.5%">
               <div hidden$="{{hideinfovalue}}"> 
               <p hidden$="{{hideopenplan}}">Save</p>
                <center><paper-icon-button hidden$="{{hidecloseplan}}" icon="save" on-click="FnSave"></paper-icon-button>
                </center>
                </div>
                <div hidden$="{{hideinfovalue1}}">
                  <paper-icon-button id="downloads" icon="create" on-click="fnedit"></paper-icon-button>
                  <paper-tooltip for="download">Edit</paper-tooltip>
                </div>  
          </td>
        </tr>
      </table>
  
     

  <paper-dialog entry-animation="scale-up-animation" exit-animation="fade-out-animation" id="fnsetdialogs" modal >
    <center><h2>Assesment value</h2></center>
      <div class="exceldiv">
            <h4>Markentry sheet download-</h4><paper-icon-button id="download" icon="icons:file-download" onclick="exportToExcel21()"></paper-icon-button>
            <paper-tooltip for="download">Download</paper-tooltip>
     </div>
      <div class="exceldiv1" >
            <input id="assesmentreadfile1{{id}}" type="file" onchange="loadFiles(event)"/>
            <xmp id="output"></xmp>
     </div>
      <div class="exceldiv2" >
           <h4> Markentry sheet upload-</h4><paper-icon-button  id="upload" icon="icons:file-upload" on-click="FnClick"></paper-icon-button>
            <paper-tooltip for="upload">Upload</paper-tooltip>
     </div>
       <center><paper-button on-click="fnclick" style="color:white;background-color:black">Close</paper-button><center>
</paper-dialog>
</div>

  <table border="1" id="Assesmentxlcard{{id}}" hidden>    
      <tr>   
       <th id="tb1">SNo</th>
       <th id="tb1">StudentId</th>
       <th id="tb2">StudentName</th>
       <th id="tb1">Mark</th>
      </tr>  
     
      <template is="dom-repeat" items="{{assemensarr}}" >
      <tr>
       <td>{{item.serialno}}</td>
       <td>{{item.id}}</td>
       <td>{{item.student_name}}</td>
       <td>{{item.mark}}</td>
    
      </tr>  
      </template> 
    <table border="1"   id="Assesmentxlcardfinal{{id}}" hidden  >    
      <tr>   
       <th id="tb1">SNo</th>
       <th id="tb1">Student Id</th>
       <th id="tb2">StudentName</th>
       <th id="tb1">chapter name</th>
       <th id="tb1">concept name</th>
       <th id="tb1">Sub concept name</th>
       <th id="tb1">Mark</th>
      </tr>  
     
      <template is="dom-repeat" items="{{studentassmentmarkarr}}" >
      <tr>
       <td>{{item.serialno}}</td>
       <td>{{item.student_id}}</td>
       <td>{{item.student_name}}</td>
       <td>{{item.chapter_name}}</td>
       <td>{{item.concept_name}}</td>
       <td>{{item.sub_concept_name}}</td>
       <td>{{item.mark}}</td>
      </tr>  
       </template> 
     </table> 
     <curriculum-assesment-service-card id="crriculambookservice"></curriculum-assesment-service-card>
   <iron-ajax
        method="post"
        id="curriculamassesmentmarkajax"
        url="{{curriculamassesmentmarkurl}}"
        params="{{curriculamassesmentmarkparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="curriculamassesmentmarkResponse"
        debounce-duration="300"/>
    </iron-ajax>
    <iron-ajax
        method="post"
        id="curriculamassesmentmark1ajax"
        url="{{curriculamassesmentmark1url}}"
        params="{{curriculamassesmentmark1param}}"
        handle-as="json"
        content-type="application/json"
        on-response="curriculamassesmentmark1Response"
        debounce-duration="300"/>
     </iron-ajax>
     <iron-ajax
        method="post"
        id="curriculamassesmentmark2ajax"
        url="{{curriculamassesmentmark2url}}"
        params="{{curriculamassesmentmark2param}}"
        handle-as="json"
        content-type="application/json"
        on-response="curriculamassesmentmark2Response"
        debounce-duration="300"/>
     </iron-ajax>  
     <iron-ajax
        method="post"
        id="checkcompleteplanajax"
        url="{{checkcompleteplanurl}}"
        params="{{checkcompleteplanparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="checkcompleteplanResponse"
        debounce-duration="300"/>
       </iron-ajax>
   <paper-dialog id="curriculamenrichmentdialog11" >
         <center><h2>{{dialogvalue}}</h2></center> 
           <center><paper-button id="rmcls1" style="color:white;background-color:black" on-click="enrichclose1">Close</paper-button> </center>
      </paper-dialog>
   <paper-dialog id="curriculamcorrectiondialog" >
      <center>   <iron-autogrow-textarea label="Home Aids"  value="{{correctionstatus}}" placeholder="Your Correction Status  Here..."></iron-autogrow-textarea></center> 
          <center style="margin-top: 10%;">
            <paper-button  on-click="fncorrectionsave" style="color:white;background-color:black">Save</paper-button>
            <paper-button id="rmcls1" style="color:white;background-color:black" on-click="fncorrectionclose">Close</paper-button>
       </center>
      </paper-dialog>
       <paper-dialog id="curriculamdialog" >
       <h1>  <center>{{dialogvalue}}</center> </h1>
          <center style="margin-top: 10%;">
            <paper-button id="rmcls1" style="color:white;background-color:black" on-click="Dialclose">Close</paper-button>
          </center>
      </paper-dialog>

   
  </template>
   <script type="text/javascript">

 
  var array=[]
  function loadFiles(event){
  alasql('SELECT * FROM FILE(?,{headers:true})',[event],function(data){
    array=data; 
  // alert(JSON.stringify(array));
  });
  }
  </script>
<script type="text/javascript">
var ids;
  function exportToExcel21(){
 var htmls = "";
 var tab_text = '<table border="1px" style="font-size:17px" ">';
    var textRange; 
    var j = 0;
    var tab = document.getElementById('Assesmentxlcard'+ids); // id of table
    var lines = tab.rows.length;

 
    if (lines > 0) {
        tab_text = tab_text + '<tr bgcolor="#DFDFDF">' + tab.rows[0].innerHTML + '</tr>';
    }

   
    for (j = 1 ; j < lines; j++) {     
        tab_text = tab_text + "<tr>" + tab.rows[j].innerHTML + "</tr>";
    }

    tab_text = tab_text + "</table>";
   
    var uri = 'data:application/vnd.ms-excel;base64,';
            var template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'; 
            var base64 = function(s) {
                return window.btoa(unescape(encodeURIComponent(s)))
            };

            var format = function(s, c) {
                return s.replace(/{(\w+)}/g, function(m, p) {
                    return c[p];
                })
            };

         htmls = tab_text

            var ctx = {
                worksheet : 'assesment' || 'Worksheet',
                table : htmls
            }
        var link = document.createElement("a");
            link.download = 'assesment';
            link.href = uri + base64(format(template, ctx));
            link.click();
    }

    

  </script>
  <script>
  (function() {
    'use strict';
   var setassesment='no';
   var temp=[];
   var passarr=[];
   var status="no";
   var  finalvalue="sucess";
   var checinfo="";
   
    Polymer({
      is: 'curriculum-assesment-card',
fnchange:function(e){
ids=this.id;
 if(document.querySelector("#cpayes1"+this.id).checked==true){
setassesment='yes';
 this.$.fnsetdialogs.open();
 this.curriculamassesmentmark();
 }
 else if(document.querySelector("#cpayes1"+this.id).checked==false){
  setassesment='no';
 }
},
fnpass:function(e){
passarr=e;
},
fnclick:function(e){
this.$.fnsetdialogs.close();
},
fnedit:function(e){
localStorage.setItem("localsess_comp_service",this.completiondate);
  this.hideinfovalue=false;
  this.hideinfovalue1=true;
},
  FnSave:function(e){
 //alert(localStorage.getItem("localsess_comp_service"));
         if(array.length==0){
           setassesment='no';
         }
         else{
           setassesment='yes';
         }
          /*alert(this.conceptname+2+this.conceptid+2+this.chapterid+2+this.chaptername+this.link+2+this.url+2+this.filename+2+this.rowid+2+this.sno+2+this.fromdate+2+this.todate+2+this.homeaids+2+this.subconceptid+2+setassesment);*/

         
         
      if(temp.length==0){
        
            if(this.editvalue=="editvalue"){
              if(finalvalue=="sucess"){
                 setassesment='yes';
             document.querySelector('curriculum-plan-conceptapproval-card').FnToggleSpinner(true);
             this.$.crriculambookservice.fncurriculampassassesmentvaluefninal(this.conceptid,this.conceptname,this.chapterid,this.chaptername,this.rowid,this.sno,this.assesmentdate,this.fromdate,this.todate,setassesment,this.subconceptid,this.subconceptname,status,localStorage.getItem("localsess_comp_service"),this.correctionstatus,this.skill,this.value,this.innovation,this.coremarks,this.period);
              }
              else{
                this.dialogvalue="Please Check the value";
                this.$.curriculamdialog.open();
                status="no";
              }
             }
              else{
                  alert("Please upload the Assesment Value");
                    document.querySelector("#cpayes1"+checinfo).checked=false;  
                    document.querySelector("#cpayes"+ids).checked=false;
               }
       }
       else
      {
        if(finalvalue=="sucess"){
           if(this.assemensarr.length==temp.length){
      document.querySelector('curriculum-plan-conceptapproval-card').FnToggleSpinner(true);
            for(var i=0;i<temp.length;i++){
               this.$.crriculambookservice.fncurriculampassassesmentvalue(temp[i].StudentId,temp[i].StudentName,temp[i].Mark,this.conceptid,this.conceptname,this.chapterid,this.chaptername,this.rowid,this.sno,this.assesmentdate,this.fromdate,this.todate,setassesment,this.subconceptid,this.subconceptname,temp.length,status,localStorage.getItem("localsess_comp_service"),this.correctionstatus,this.skill,this.value,this.innovation,this.coremarks,this.period);
              }
           }
           else{

            this.dialogvalue="Please  insert the all student mark";
              this.$.curriculamdialog.open();
              status="no";
              document.querySelector("#cpayes1"+checinfo).checked=false;  
             document.querySelector("#cpayes"+ids).checked=false;
             temp=[];
              document.getElementById("assesmentreadfile1"+this.id).value ="";
           }
      }
      else{
        this.dialogvalue="Please Check the value";
        this.$.curriculamdialog.open();
        status="no";
         document.querySelector("#cpayes1"+checinfo).checked=false; document.querySelector("#cpayes"+ids).checked=false;
          temp=[];
          array=[];
          document.getElementById("assesmentreadfile1"+this.id).value ="";
      }
      }
       document.querySelector("#cpayes1"+checinfo).checked=false;  
       document.querySelector("#cpayes"+ids).checked=false;
       status="no"; 
       finalvalue="sucess";
       document.getElementById("assesmentreadfile1"+this.id).value ="";
       temp=[];
       array=[];
     },
        FnClick:function(){
         

      if(array.length==0){
        alert("Pls save the file in EXCEL WORKBOOK extension!");
        document.getElementById("assesmentreadfile").value = "";
       }
       else{ 
        for(var i=0;i<array.length;i++){
             if(JSON.stringify({})==JSON.stringify(array[i])){

             }
         else{
         var setarr=[];
           setarr=Object.keys(array[i]);
             setarr.splice(0,3);
             
          
       

        if(setarr.length==1){
        var obj={};
           obj.SNo=array[i].SNo;
           obj.StudentId=array[i].StudentId;
           obj.StudentName=array[i].StudentName;
           obj.Mark=array[i].Mark;
           temp.push(obj);
          

               }
           }}
            if(temp.length==0){
      alert("pls Upload the Correct value");
           }
           else{
      alert("Upload Sucess...!");
        }
 
        }

      },
curriculamassesmentmark:function(){
this.curriculamassesmentmarkurl=sessionStorage.getItem("addrinfo")+"/curriculamassesmentmark-service";
    var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        this.curriculamassesmentmarkparam=obj;
        this.$.curriculamassesmentmarkajax.generateRequest();

},
fnassmentmark:function(e){
this.curriculamassesmentmark1();
},
curriculamassesmentmark1:function(){
  ids=this.id;
        this.curriculamassesmentmark1url=sessionStorage.getItem("addrinfo")+"/curriculamassesmentmark1-service";
        var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.chapterid=this.chapterid;
        obj.conceptid=this.conceptid;
        obj.subconceptid=this.subconceptid;
        obj.rowid=this.rowid;
       // alert(JSON.stringify(obj));
        this.curriculamassesmentmark1param=obj;
        this.$.curriculamassesmentmark1ajax.generateRequest();

},
curriculamassesmentmark1Response:function(e){
        var res=e.detail.response.returnval;
     //   alert(JSON.stringify(res));
        for(var i=0;i<res.length;i++){
            res[i].serialno=i+1;
        }
     this.studentassmentmarkarr=res;
  this.curriculamassesmentmark2();

        },

curriculamassesmentmark2:function(){
  ids=this.id;
        this.curriculamassesmentmark2url=sessionStorage.getItem("addrinfo")+"/curriculamassesmentmark1-service";
        var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.chapterid=this.chapterid;
        obj.conceptid=this.conceptid;
        obj.subconceptid=this.subconceptid;
        obj.rowid=this.rowid;
       // alert(JSON.stringify(obj));
        this.curriculamassesmentmark2param=obj;
        this.$.curriculamassesmentmark2ajax.generateRequest();

},
curriculamassesmentmark2Response:function(e){
       this.exportToExcel211();
        },


  
exportToExcel211:function(e){
//alert(1);
    var htmls = "";
    var tab_text = '<table border="1px" style="font-size:17px" ">';
    var textRange; 
    var j = 0;
    var tab = document.getElementById('Assesmentxlcardfinal'+this.id); // id of table
    var lines = tab.rows.length;

 
    if (lines > 0) {
        tab_text = tab_text + '<tr bgcolor="#DFDFDF">' + tab.rows[0].innerHTML + '</tr>';
    }

   
    for (j = 1 ; j < lines; j++) {     
        tab_text = tab_text + "<tr>" + tab.rows[j].innerHTML + "</tr>";
    }

    tab_text = tab_text + "</table>";
   
    var uri = 'data:application/vnd.ms-excel;base64,';
            var template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'; 
            var base64 = function(s) {
                return window.btoa(unescape(encodeURIComponent(s)))
            };

            var format = function(s, c) {
                return s.replace(/{(\w+)}/g, function(m, p) {
                    return c[p];
                })
            };

         htmls = tab_text

            var ctx = {
                worksheet : 'assesment' || 'Worksheet',
                table : htmls
            }
        var link = document.createElement("a");
            link.download = 'assesment';
            link.href = uri + base64(format(template, ctx));
            link.click();
    
},
curriculamassesmentmarkResponse:function(e){
        var res=e.detail.response.returnval;
      for(var i=0;i<res.length;i++){
            res[i].serialno=i+1;
        }
     
        this.assemensarr=res;
     
        },
    fnpass1:function(arr){
     this.dialogvalue=arr;
      this.$.curriculamenrichmentdialog11.open();
   
    },
    enrichclose1:function(e){
      this.$.curriculamenrichmentdialog11.close();

    },

 fncorrection:function(){
    this.$.curriculamcorrectiondialog.open();
   },
   fncorrectionsave:function(){
    this.$.curriculamcorrectiondialog.close();
   },
 fncorrectionclose:function(){
    this.$.curriculamcorrectiondialog.close();
   },
   Dialclose:function(){
    this.$.curriculamdialog.close();
   },

 fncompletestaus:function(e){
  if(document.querySelector("#cpayes"+this.id).checked==true){
      this.checkcompleteplan();
      checinfo=this.id;
      status="yes";
    }
   else if(document.querySelector("#cpayes"+this.id).checked==false){
     status="no"; 
     checinfo="";
    }
      },
    checkcompleteplan:function(e){
           this.checkcompleteplanurl=sessionStorage.getItem("addrinfo")+"/checkcompleteplan-service";
           var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
           obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
           obj.academicyear=localStorage.getItem("curr_sess_academicyear");
           obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
           obj.empid=sessionStorage.getItem("curr_sess_loggedid");
           obj.sectionid=localStorage.getItem("curr_sess_sectionid");
           obj.gradeid=localStorage.getItem("curr_sess_gradeid");
           obj.subjectid=localStorage.getItem("curr_sess_subjectid");
           obj.chapterid=this.chapterid;
           obj.conceptid=this.conceptid;
           obj.subconceptid=this.subconceptid;
           obj.rowid=this.rowid;
           obj.termid=sessionStorage.getItem("termid"); 
           this.checkcompleteplanparam=obj;
          //  alert(JSON.stringify(obj));
           this.$.checkcompleteplanajax.generateRequest();


},checkcompleteplanResponse:function(e){
            
          
            var lessonarr=e.detail.response.lessonarr;  
           
            if(lessonarr=="empty"){
          
            this.dialogvalue="please Check the Lesson";
            this.$.curriculamdialog.open();
            document.querySelector("#cpayes"+checinfo).checked=false;

            }
         
        
            else{
                  this.dialogvalue="All Process are sucess";
                  this.$.curriculamdialog.open();
                   finalvalue="sucess";
                  document.querySelector("#cpayes"+checinfo).checked=true;
             }
         
      },
 
    });
  })();
  </script>
</dom-module>
