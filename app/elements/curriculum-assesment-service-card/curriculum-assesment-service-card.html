

<link rel="import" href="..\..\bower_components/polymer/polymer.html">

<dom-module id="curriculum-assesment-service-card">
  <template>
    <style>
      :host {
        display: block;
      } 
    </style>
      <iron-ajax
        method="post"
        id="lessonplanvalueajax"
        url="{{lessonplanvalueurl}}"
        params="{{lessonplanvalueparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="lessonplanvalueResponse"
        debounce-duration="300"/>
       
         <iron-ajax
        method="post"
        id="fnhomeworkajax"
        url="{{fnhomeworkurl}}"
        params="{{fnhomeworkparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fnhomeworkResponse"
        debounce-duration="300"/>
         <iron-ajax
        method="post"
        id="fncompletestatusajax"
        url="{{fncompletestatusurl}}"
        params="{{fncompletestatusparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fncompletestatusResponse"
        debounce-duration="300"/>
        <iron-ajax
        method="post"
        id="fnassesmenttypesajax"
        url="{{fnassesmenttypesurl}}"
        params="{{fnassesmenttypesparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fnassesmenttypesResponse"
        debounce-duration="300"/>
         <iron-ajax
        method="post"
        id="getteacingaidsajax"
        url="{{getteacingaidsurl}}"
        params="{{getteacingaidsparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="getteacingaidsResponse"
        debounce-duration="300"/>
         <iron-ajax
        method="post"
        id="passcurriculumlessonplanajax"
        url="{{passcurriculumlessonplanurl}}"
        params="{{passcurriculumlessonplanparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="passcurriculumlessonplanResponse"
        debounce-duration="300"/>
        <iron-ajax
        method="post"
        id="passcurriculumteachajax"
        url="{{passcurriculumteachurl}}"
        params="{{passcurriculumteachparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="passcurriculumteachResponse"
        debounce-duration="300"/>
       </iron-ajax>
       <iron-ajax
        method="post"
        id="passcurriculumhomeworkajax"
        url="{{passcurriculumhomeworkurl}}"
        params="{{passcurriculumhomeworkparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="passcurriculumhomeworkResponse"
        debounce-duration="300"/>
       </iron-ajax>
     <!--  <iron-ajax
        method="post"
        id="passcurriculumassesmentajax"
        url="{{passcurriculumassesmenturl}}"
        params="{{passcurriculumassesmentparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="passcurriculumassesmentResponse"
        debounce-duration="300"/>
       </iron-ajax> -->
        <iron-ajax
        method="post"
        id="curriculampassassesmentvalueajax"
        url="{{curriculampassassesmentvalueurl}}"
        params="{{curriculampassassesmentvalueparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="curriculampassassesmentvalueResponse"
        debounce-duration="300"/>
       </iron-ajax>
        <iron-ajax
        method="post"
        id="curriculampassassesmentvaluefinalajax"
        url="{{curriculampassassesmentvaluefinalurl}}"
        params="{{curriculampassassesmentvaluefinalparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="curriculampassassesmentvaluefinalResponse"
        debounce-duration="300"/>
       </iron-ajax>
         <iron-ajax
        method="post"
        id="fnmailprocessajax"
        url="{{fnmailprocessurl}}"
        params="{{fnmailprocessparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="fnmailprocessResponse"
        debounce-duration="300"/>
       </iron-ajax>
       <iron-ajax
        method="post"
        id="getinparnetmailajax"
        url="{{getinparnetmailurl}}"
        params="{{getinparnetmailparam}}"
        handle-as="json"
        content-type="application/json"
        on-response="getinparnetmailResponse"
        debounce-duration="300"/>
       </iron-ajax>
     
  </template>
  <script>
  (function() {
    'use strict';
var c1=0,c2=0;
    Polymer({
      is: 'curriculum-assesment-service-card',
fnmailprocess:function(e){
    
this.fnmailprocessurl=sessionStorage.getItem("addrinfo")+"/fnmailprocess-service";
           var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
           obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
           obj.schoolname=sessionStorage.getItem("curr_sess_loggedschoolname");
           obj.academicyear=localStorage.getItem("curr_sess_academicyear");
           obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
           obj.empid=sessionStorage.getItem("curr_sess_loggedid");
           obj.sectionid=localStorage.getItem("curr_sess_sectionid");
           obj.gradeid=localStorage.getItem("curr_sess_gradeid");
           obj.subjectid=localStorage.getItem("curr_sess_subjectid");
           obj.chapterid=localStorage.getItem("curr_sess_chapterid");
           obj.termid=sessionStorage.getItem("termid"); 
           this.fnmailprocessparam=obj;

  this.$.fnmailprocessajax.generateRequest();
     },

  fnmailprocessResponse:function(e){
        var res=e.detail.response.returnval;
        alert(JSON.stringify(res));
         
      },
      fngetinparnetmail:function(e){
    
     this.getinparnetmailurl=sessionStorage.getItem("addrinfo")+"/getinparnetmail-service";
           var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
       obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
       obj.schoolname=sessionStorage.getItem("curr_sess_loggedschoolname");
       obj.academicyear=localStorage.getItem("curr_sess_academicyear");
       obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
       obj.empid=sessionStorage.getItem("curr_sess_loggedid");
       obj.sectionid=localStorage.getItem("curr_sess_sectionid");
       obj.gradeid=localStorage.getItem("curr_sess_gradeid");
       obj.subjectid=localStorage.getItem("curr_sess_subjectid");
       obj.chapterid=localStorage.getItem("curr_sess_chapterid");
       obj.termid=sessionStorage.getItem("termid"); 
       this.getinparnetmailparam=obj;
      this.$.getinparnetmailajax.generateRequest();

},
getinparnetmailResponse:function(e){
        var res=e.detail.response.returnval;
        // alert(JSON.stringify(res));
       document.querySelector('curriculum-plan-conceptapproval-card').parentarr=res;
      },
Fnpasscurriculumlessonplan:function(sno,rowid,conceptname,subconceptname,skill,value,innovation,coremarks,subremak,enrichmentsuggest,chapterid,chaptername,conceptid,subconceptid,fromdate,todate,period){
this.passcurriculumlessonplanurl=sessionStorage.getItem("addrinfo")+"/passcurriculumlessonplan-service";
    var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.sno=sno;
        obj.rowid=rowid;
        obj.subconceptname=subconceptname;
        obj.skill=skill;
        obj.value=value;
        obj.innovation=innovation;
        obj.coremarks=coremarks;
        obj.subremak=subremak;
        obj.enrichmentsuggest=enrichmentsuggest;
        obj.chapterid=chapterid;
        obj.chaptername=chaptername;
        obj.conceptid=conceptid;
        obj.conceptname=conceptname;
        obj.subconceptid=subconceptid;
        obj.subconceptname=subconceptname;
        obj.rowid=rowid;
        obj.sno=sno;
        obj.fromdate=fromdate;
        obj.todate=todate;
        obj.period=period;
        this.passcurriculumlessonplanparam=obj;
        this.$.passcurriculumlessonplanajax.generateRequest();

},
passcurriculumlessonplanResponse:function(e){
        var res=e.detail.response.returnval;
        document.querySelector('curriculum-lessonplan-card').fnpass("Inserted Successfully");
       if(res=="succ"){
        this.fngetlessonplanvalue();
       }
        },


Fnpasscurriculumteach:function(conceptname,conceptid,chapterid,chaptername,link,url,filename,rowid,sno,fromdate,todate){
this.passcurriculumteachurl=sessionStorage.getItem("addrinfo")+"/passcurriculumteach-service";
    var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.link=link;
        obj.url=url;
        obj.chapterid=chapterid;
        obj.chaptername=chaptername;
        obj.conceptid=conceptid;
        obj.conceptname=conceptname;
        obj.rowid=rowid;
        obj.sno=sno;
        obj.fromdate=fromdate;
        obj.todate=todate;
        obj.filename=filename;
        this.passcurriculumteachparam=obj;
      //  alert(JSON.stringify(obj));
        this.$.passcurriculumteachajax.generateRequest();
     },
  passcurriculumteachResponse:function(e){
        var res=e.detail.response.returnval;
    //     alert(JSON.stringify(res));
    if(res=="succ"){
      this.fngetteacingaids();
    }
      },
      Fnpasscurriculumhomework:function(conceptname,conceptid,chapterid,chaptername,link,url,filename,rowid,sno,fromdate,todate,homeaids){
this.passcurriculumhomeworkurl=sessionStorage.getItem("addrinfo")+"/passcurriculumhomework-service";
    var obj={};
         obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.link=link;
        obj.url=url;
        obj.chapterid=chapterid;
        obj.chaptername=chaptername;
        obj.conceptid=conceptid;
        obj.conceptname=conceptname;
        obj.rowid=rowid;
        obj.sno=sno;
        obj.fromdate=fromdate;
        obj.todate=todate;
        obj.filename=filename;
        obj.homeaids=homeaids;
        this.passcurriculumhomeworkparam=obj;
       // alert(JSON.stringify(obj));
        this.$.passcurriculumhomeworkajax.generateRequest();
     },
 passcurriculumhomeworkResponse:function(e){
        var res=e.detail.response.returnval;
      //alert(JSON.stringify(res));
       if(res=="succ"){
        this.fnhomework();
       }
      },
  fncurriculampassassesmentvalue:function(StudentId,StudentName,Mark,conceptid,conceptname,chapterid,chaptername,rowid,sno,assesmentdate,fromdate,todate,assmentstatus,subconceptid,subconceptname,templength,status,completedate,correctionstatus,skill,value,innovation,coremarks,period){
    c1=templength;
    this.conceptid=conceptid;
    this.conceptname=conceptname;
    this.chapterid=chapterid;
    this.chaptername=chaptername;
    this.rowid=rowid;
    this.sno=sno;
    this.assesmentdate=assesmentdate;
    this.fromdate=fromdate;
    this.todate=todate;
    this.assmentstatus=assmentstatus;
    this.subconceptid=subconceptid;
    this.subconceptname=subconceptname;
    this.status=status;
    this.completedate=completedate;
    this.correctionstatus=correctionstatus;
    this.skill=skill;
    this.value=value;
    this.innovation=innovation;
    this.coremarks=coremarks;
    this.period=period;

this.curriculampassassesmentvalueurl=sessionStorage.getItem("addrinfo")+"/curriculampassassesmentvalue-service";
     var obj={};
        obj.sno=sno;
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.StudentId=StudentId;
        obj.StudentName=StudentName;
        obj.Mark=Mark;
        obj.chapterid=chapterid;
        obj.chaptername=chaptername;
        obj.conceptid=conceptid;
        obj.conceptname=conceptname;
        obj.rowid=rowid;
        obj.fromdate=fromdate;
        obj.todate=todate;
        obj.assmentstatus=assmentstatus;
        obj.assesmentdate=assesmentdate;
        obj.subconceptid=subconceptid;
        obj.subconceptname=subconceptname;
        this.curriculampassassesmentvalueparam=obj;
        //alert(JSON.stringify(obj));
        this.$.curriculampassassesmentvalueajax.generateRequest();
     },
 curriculampassassesmentvalueResponse:function(e){
        var res=e.detail.response.returnval;
       c2++;
      if(c1==c2){
          c1=0;
          c2=0;   
    //    alert('1');
this.fncurriculampassassesmentvaluefninal(this.conceptid,this.conceptname,this.chapterid,this.chaptername,this.rowid,this.sno,this.assesmentdate,this.fromdate,this.todate,this.assmentstatus,this.subconceptid,this.subconceptname,this.status,this.completedate,this.correctionstatus,this.skill,this.value,this.innovation,this.coremarks,this.period);
                 
         }
   },

  fncurriculampassassesmentvaluefninal:function(conceptid,conceptname,chapterid,chaptername,rowid,sno,assesmentdate,fromdate,todate,assmentstatus,subconceptid,subconceptname,status,completedate,correctionstatus,skill,value,innovation,coremarks,period){
   
    this.curriculampassassesmentvaluefinalurl=sessionStorage.getItem("addrinfo")+"/curriculampassassesmentvaluefinal-service";
    var obj={};
        obj.sno=sno;
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.chapterid=chapterid;
        obj.chaptername=chaptername;
        obj.conceptid=conceptid;
        obj.conceptname=conceptname;
        obj.rowid=rowid;
        obj.fromdate=fromdate;
        obj.todate=todate;
        obj.assmentstatus=assmentstatus;
        obj.assesmentdate=assesmentdate;
        obj.subconceptid=subconceptid;
        obj.subconceptname=subconceptname;
        obj.status=status;
        obj.completedate=completedate;
        obj.correctionstatus=correctionstatus;
        obj.skill=skill;
        obj.value=value;
        obj.innovation=innovation;
        obj.coremarks=coremarks;
        obj.period=period;
        this.curriculampassassesmentvaluefinalparam=obj;
       // alert(JSON.stringify(obj));
        this.$.curriculampassassesmentvaluefinalajax.generateRequest();
     },
   curriculampassassesmentvaluefinalResponse:function(e){
        var res=e.detail.response.returnval;
        // alert(JSON.stringify(res));
       
            if(res=="succ"){
          this.fnassesmenttypes();
          document.querySelector('curriculum-plan-conceptapproval-card').FnToggleSpinner(false);
         // document.querySelector('curriculum-assesment-card').fnpass1("Inserted Successfully");
          this.conceptid="";
          this.conceptname="";
          this.chapterid="";
          this.chaptername="";
          this.rowid="";
          this.sno="";
          this.assesmentdate="";
          this.fromdate="";
          this.todate="";
          this.assmentstatus="";
          this.subconceptid="";
          this.subconceptname="";
          }           
         
   },

  /*Fnpasscurriculumcomplete:function(chapterid,chaptername,conceptname,conceptid,subconceptid,subconceptname,rowid,sno,fromdate,todate,status,completedate,correctionstatus){
this.passcurriculumassesmenturl=sessionStorage.getItem("addrinfo")+"/passcurriculumcomplete-service";
    var obj={};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
        obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
        obj.empid=sessionStorage.getItem("curr_sess_loggedid");
        obj.empname=sessionStorage.getItem("curr_sess_loggeduname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.gradeid=localStorage.getItem("curr_sess_gradeid");
        obj.subjectid=localStorage.getItem("curr_sess_subjectid");
        obj.sectionname=localStorage.getItem("curr_sess_sectionname");
        obj.sectionid=localStorage.getItem("curr_sess_sectionid");
        obj.termid=sessionStorage.getItem("termid"); 
        obj.subjectname=localStorage.getItem("curr_sess_subjectname");
        obj.gradename=localStorage.getItem("curr_sess_gradename");
        obj.subconceptname=subconceptname;
        obj.subconceptid=subconceptid;
        obj.chapterid=chapterid;
        obj.chaptername=chaptername;
        obj.conceptid=conceptid;
        obj.conceptname=conceptname;
        obj.rowid=rowid;
        obj.sno=sno;
        obj.fromdate=fromdate;
        obj.todate=todate;
        obj.completedate=completedate;
        obj.status=status;
        obj.completedate=completedate;
        obj.subconceptid=subconceptid;
        obj.correctionstatus=correctionstatus;
        obj.subconceptname=subconceptname;
        this.passcurriculumassesmentparam=obj;
       // alert(JSON.stringify(obj));
        this.$.passcurriculumassesmentajax.generateRequest();
     },
 passcurriculumassesmentResponse:function(e){
        var res=e.detail.response.returnval;
        // alert(JSON.stringify(res));
        if(res=="succ"){
          
          this.fncompletestatus();
          document.querySelector('curriculum-complete-card').fnpass1("Inserted Successfully");
        }
      },*/
fngetlessonplanvalue:function(e){
this.lessonplanvalueurl=sessionStorage.getItem("addrinfo")+"/lessonplanvalue-service";
             var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
           obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
          obj.academicyear=localStorage.getItem("curr_sess_academicyear");
            obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
           obj.empid=sessionStorage.getItem("curr_sess_loggedid");
           obj.sectionid=localStorage.getItem("curr_sess_sectionid");
           obj.gradeid=localStorage.getItem("curr_sess_gradeid");
           obj.subjectid=localStorage.getItem("curr_sess_subjectid");
           obj.chapterid=localStorage.getItem("curr_sess_chapterid");
           obj.termid=sessionStorage.getItem("termid"); 
          this.lessonplanvalueparam=obj;
         this.$.lessonplanvalueajax.generateRequest();

},

lessonplanvalueResponse:function(e){
        var res=e.detail.response.returnval;
        var aproval=e.detail.response.aproval;
        //alert(JSON.stringify(aproval));
        for(var i=0;i<res.length;i++){
                 res[i].hideinfovalue=false;        
                 res[i].hideinfovalue1=true;        
                 res[i].enrichment_sug="";
                 res[i].sub_teacher_temark="";
           }
        for(var i=0;i<res.length;i++){
          for(var j=0;j<aproval.length;j++){
             if(res[i].concept_id==aproval[j].concept_id && res[i].concept_id==aproval[j].concept_id  && res[i].row_id==aproval[j].row_id ){
                 res[i].enrichment_sug=aproval[j].enrichment_sug;
                 res[i].sub_teacher_temark=aproval[j].sub_teacher_temark;
                 res[i].hideinfovalue=true;        
                 res[i].hideinfovalue1=false;        
             
             }
          }
        }
  for(var i=0;i<res.length;i++){
     if(res[i].sub_teacher_temark==""){
          res[i].hideinfovalue=false;        
          res[i].hideinfovalue1=true; 
     }
  }


//alert(JSON.stringify(res));
var temp=[];
 temp.push({"enrichment_sug":"Enrichment Suggestion","sno":"sno","chapter_id":"Chapterid","chapter_name":"ChapterName","concept_id":"Conceptid","sub_concept_id":"subconceptid","concept_name":"Conceptname","sub_concept_name":"sub conceptname","period":"period","skill":"skill","value":"value","innovation":"innovation","sub_teacher_temark":"remark","remarks":"Co-remark","hidecloseplan":true,"hideopenplan":false,"fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","row_id":0,"hideinfovalue":false,"hideinfovalue1":true,"planned_date_from":"From Date","planned_to_date":"To Date"});

     for(var i=0;i<res.length;i++){
        res[i].hidecloseplan=false;
        res[i].hideopenplan=true;
        res[i].sno=i+1;
        res[i].fonts="font-weight:bold;text-transform:lowercase;text-align:center;";
         temp.push(res[i]);
     }



document.querySelector('curriculum-plan-conceptapproval-card').lessonarr=temp;
},

fngetteacingaids:function(e){
this.getteacingaidsurl=sessionStorage.getItem("addrinfo")+"/getteacingaids-service";
      var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
        obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
        obj.academicyear=localStorage.getItem("curr_sess_academicyear");
           obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
           obj.empid=sessionStorage.getItem("curr_sess_loggedid");
           obj.sectionid=localStorage.getItem("curr_sess_sectionid");
           obj.gradeid=localStorage.getItem("curr_sess_gradeid");
           obj.subjectid=localStorage.getItem("curr_sess_subjectid");
           obj.chapterid=localStorage.getItem("curr_sess_chapterid");
           obj.termid=sessionStorage.getItem("termid"); 
          this.getteacingaidsparam=obj;
           this.$.getteacingaidsajax.generateRequest();

},

getteacingaidsResponse:function(e){

  var res=e.detail.response.returnval;
 
  for(var i=0;i<res.length;i++){
       if(res[i].filename==""){
      res[i].hidefilename=true;
       }
       else{
      res[i].hidefilename=false;
      }
   }
   for(var i=0;i<res.length;i++){
           var l;
           var temp2=[];
           var teachtemparr=[];
          
            l=res[i].current_url;
              temp2=l.split(",");
              
   
         for(var j=0;j<temp2.length;j++){ 
          if(temp2[j].substring(0,5)=="https")
           teachtemparr.push({"id":"0","content":temp2[j],"hideteachurl":false,"hideteachcont":true});
             else
           teachtemparr.push({"id":"1","content":temp2[j],"hideteachurl":true,"hideteachcont":false});
             }
       
        res[i].teachtemparr=teachtemparr;
 //  alert(JSON.stringify(teachtemparr));
    }
 var temp=[];
 temp.push({"concept_name":"Concept Name","url":"url","sno":"sno","chapter_id":"Chapterid","chapter_name":"ChapterName","filename":"filename","link":"link","hidecloseplan":true,"hideopenplan":false,"fonts":"font-weight:bold;text-transform:uppercase;text-align:center;width: 10%;","row_id":0,"hideinfovalue":false,"hideinfovalue1":true,"sub_concept_name":"Sub Concept Name"});

     for(var i=0;i<res.length;i++){
        res[i].hidecloseplan=false;
        res[i].hideopenplan=true;
        res[i].sno=i+1;
       res[i].fonts="font-weight:bold;text-transform:lowercase;text-align:center;width: 10%;";
         temp.push(res[i]);
       }
document.querySelector('curriculum-plan-conceptapproval-card').teacharr=temp;
},

fnhomework:function(e){
this.fnhomeworkurl=sessionStorage.getItem("addrinfo")+"/fnhomework-service";
    var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
         obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
         obj.academicyear=localStorage.getItem("curr_sess_academicyear");
         obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
         obj.empid=sessionStorage.getItem("curr_sess_loggedid");
         obj.sectionid=localStorage.getItem("curr_sess_sectionid");
         obj.gradeid=localStorage.getItem("curr_sess_gradeid");
         obj.subjectid=localStorage.getItem("curr_sess_subjectid");
         obj.chapterid=localStorage.getItem("curr_sess_chapterid");
         obj.termid=sessionStorage.getItem("termid"); 
          this.fnhomeworkparam=obj;
           this.$.fnhomeworkajax.generateRequest();

},

fnhomeworkResponse:function(e){
  var res=e.detail.response.returnval;
 
 // alert(JSON.stringify(aproval));

 for(var i=0;i<res.length;i++){
       if(res[i].filename==""){
      res[i].hidefilename=true;
       }
       else{
      res[i].hidefilename=false;
      }
  }
 for(var i=0;i<res.length;i++){
           var k;
           var temp=[];
           var hometemparr=[];
          
            k=res[i].homecurrurl;
              temp=k.split(",");
            
      for(var j=0;j<temp.length;j++){ 
           if(temp[j].substring(0,5)=="https")
              hometemparr.push({"id":"0","content":temp[j],"hidehomeurl":false,"hidehomecont":true});
              else
             hometemparr.push({"id":"1","content":temp[j],"hidehomeurl":true,"hidehomecont":false});
             }
        res[i].hometemparr=hometemparr;
       
     }
var temp=[];
 temp.push({ "concept_name":"Concept Name","home_aids":"Home Aids","url":"url","sno":"sno","chapter_id":"Chapterid","chapter_name":"ChapterName","filename":"filename","link":"link","hidecloseplan":true,"hideopenplan":false,"fonts":"font-weight:bold;text-transform:uppercase;text-align:center;width: 10%;","row_id":0,"hideinfovalue":false,"hideinfovalue1":true,"sub_concept_name":"Sub Concept Name"});

     for(var i=0;i<res.length;i++){
         
        res[i].hidecloseplan=false;
        res[i].hideopenplan=true;
        res[i].sno=i+1;
        res[i].fonts="font-weight:bold;text-transform:lowercase;text-align:center;width:10%;";
         temp.push(res[i]);
     }
   document.querySelector('curriculum-plan-conceptapproval-card').homearr=temp;          
},

fnassesmenttypes:function(e){
this.fnassesmenttypesurl=sessionStorage.getItem("addrinfo")+"/fnassesmenttypes-service";
    var obj={};
         obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
         obj.academicyear=localStorage.getItem("curr_sess_academicyear");
         obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
         obj.empid=sessionStorage.getItem("curr_sess_loggedid");
         obj.sectionid=localStorage.getItem("curr_sess_sectionid");
         obj.gradeid=localStorage.getItem("curr_sess_gradeid");
         obj.subjectid=localStorage.getItem("curr_sess_subjectid");
         obj.chapterid=localStorage.getItem("curr_sess_chapterid");
         obj.termid=sessionStorage.getItem("termid"); 
        this.fnassesmenttypesparam=obj;
        this.$.fnassesmenttypesajax.generateRequest();

   },
fnassesmenttypesResponse:function(e){
 //alert(e.detail.response.returnval);
   var res=e.detail.response.returnval;
  var aproval=e.detail.response.aproval;
   //alert(JSON.stringify(res));

     //alert(JSON.stringify(aproval));
        for(var i=0;i<res.length;i++){
                 res[i].hideinfovalue=false;        
                 res[i].hideinfovalue1=true;        
                 res[i].editvalue="";
              
           }
        for(var i=0;i<res.length;i++){
          for(var j=0;j<aproval.length;j++){
             if(res[i].concept_id==aproval[j].concept_id && res[i].concept_id==aproval[j].concept_id  && res[i].row_id==aproval[j].row_id){
                   if(aproval[j].status=="yes" && aproval[j].assesment_status=="yes"){
                 res[i].completion_date=aproval[j].complete_date;
                 res[i].correction_status=aproval[j].correction_status;
                 res[i].hideinfovalue=true;        
                 res[i].hideinfovalue1=false;        
                 res[i].editvalue="editvalue";
                   }
                    }
          }
        }
   var temp=[];
 temp.push({"sno":"sno","chapter_id":"Chapterid","chapter_name":"ChapterName","concept_id":"Conceptid","concept_name":"Conceptname","sub_concept_id":"subconceptid","sub_concept_name":"sub conceptname","hidecloseplan":true,"hideopenplan":false,"fonts":"font-weight:bold;text-transform:uppercase;text-align:center;","row_id":0,"assesment_date":"Assesment Date","assesment_type":"Assesment Type","hideinfovalue":false,"hideinfovalue1":true,"completion_date":"Completion Date","completion_status":"Completion Status","correction_status":"Correction Status"});

    for(var i=0;i<res.length;i++){
        res[i].hidecloseplan=false;
        res[i].hideopenplan=true;
        res[i].sno=i+1;
        res[i].fonts="font-weight:bold;text-transform:lowercase;text-align:center;";
         temp.push(res[i]);
     }


  document.querySelector('curriculum-plan-conceptapproval-card').assesmentarr=temp;          
},

fncompletestatus:function(e){
this.fncompletestatusurl=sessionStorage.getItem("addrinfo")+"/fncompletestatus-service";
     var obj={"schoolid":"","academic_year":"","roleid":"","emp_id":""};
         obj.schoolid=sessionStorage.getItem("curr_sess_loggedschoolid");
         obj.academicyear=localStorage.getItem("curr_sess_academicyear");
         obj.roleid=sessionStorage.getItem("curr_sess_loggedroleid");
         obj.empid=sessionStorage.getItem("curr_sess_loggedid");
         obj.sectionid=localStorage.getItem("curr_sess_sectionid");
         obj.gradeid=localStorage.getItem("curr_sess_gradeid");
         obj.subjectid=localStorage.getItem("curr_sess_subjectid");
         obj.chapterid=localStorage.getItem("curr_sess_chapterid");
         obj.termid=sessionStorage.getItem("termid"); 
         this.fncompletestatusparam=obj;
         this.$.fncompletestatusajax.generateRequest();

},

fncompletestatusResponse:function(e){
 // alert(e.detail.response.returnval);
        var res=e.detail.response.returnval;
       
        var aproval=e.detail.response.aproval;
        //alert(JSON.stringify(aproval));
        for(var i=0;i<res.length;i++){
                 res[i].hideinfovalue=false;        
                 res[i].hideinfovalue1=true;        
                 res[i].completion_date="";
                 res[i].correction_status="";
                 res[i].status="";
           }
        
        
var temp=[];
 temp.push({"sno":"sno","chapter_id":"Chapterid","chapter_name":"ChapterName","concept_id":"Conceptid","concept_name":"Conceptname","sub_concept_id":"subconceptid","sub_concept_name":"sub conceptname","hidecloseplan":true,"hideopenplan":false,"fonts":"font-weight:bold;text-transform:uppercase;text-align:center;width: 10%;","row_id":0,"completion_date":"Completion Date","completion_status":"Completion Status","correction_status":"Correction Status","hideinfovalue":false,"hideinfovalue1":true,"skill":"skill","value":"value","innovation":"innovation","period":"period"});

    for(var i=0;i<res.length;i++){
        res[i].hidecloseplan=false;
        res[i].hideopenplan=true;
        res[i].sno=i+1;
        res[i].fonts="font-weight:bold;text-transform:lowercase;text-align:center;width: 10%;";
         temp.push(res[i]);
     }
document.querySelector('curriculum-plan-conceptapproval-card').completearr=temp;

},

    });
  })();
  </script>
</dom-module>
